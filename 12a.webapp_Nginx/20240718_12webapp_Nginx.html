<!DOCTYPE html><html><head>
      <title>20240718_12webapp_Nginx</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\sfujimoto\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.13\crossnote\dependencies\katex\katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:local("Material Icons"),local("MaterialIcons-Regular"),url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAfIAAsAAAAADDAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZW7kosY21hcAAAAYAAAADTAAACjtP6ytBnbHlmAAACVAAAAxgAAAQ4zRtvlGhlYWQAAAVsAAAALwAAADYRwZsnaGhlYQAABZwAAAAcAAAAJAeKAzxobXR4AAAFuAAAABIAAAA8OGQAAGxvY2EAAAXMAAAAIAAAACAG5AfwbWF4cAAABewAAAAfAAAAIAEfAERuYW1lAAAGDAAAAVcAAAKFkAhoC3Bvc3QAAAdkAAAAYgAAAK2vz7wkeJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2BkPsQ4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVLy4xKzzX4chhrmK4QpQmBEkBwAZygyweJzFkr0NwjAQhZ+TEP6CRUfHBEwRUWaQTICyQbpMwRCskA5RUIONxG0RnnNpKAIV4qzPku/8c353ACYAYrIjCWCuMAh2ptf0/hiL3p/gyPUWa3osqlt0L1zu9r71z8dGrJRykFoauXQd932Lj5vhG+MjxGeYI8MKETObMpslf5EyP8tg+vHun5r539PvlvXzaVhRFVQDTPEWKVQR90KhnnC5Ek67vUKN4VuFasM/ldARj43CCkCsEjpJSoVVgRyU0GVSK6wUpFFCx8lFgX0BiXpRPQB4nE2TTWjcRhTH3xttpDhxN7uxPlp3u/FK7moRPixafRijNosxSw/LUsIwNcaEHPZggo/FmEKMCKWU4kNOOftQSlhE8alnH0Ix9BqWnHooPRrTQ0+mnu2bXTu2pPdGM9LM/6c3fwECTM4gBBMYQNqxzLrZAjqYSlqu2TAHZQA0/DQJH6FtzqGDnvbt4Ggwvzw/nL8EfH8kW0fsuRqhgWXZnY7M1picaUL7Du5BHeDzMIl83dAt016wH1qmvtSMo5R6YRJHTR//FXsff/nj/tc/5K9P5d+nP22+fFK5u7v3K39SW3y+OtDKO3L85vD09PD9z5X17a2N1g4tqk01RlqX7gyoEmnsWQtVr4rtZMmukEaFBZxzefkCn11cyKMLZgshRwgTYNoLNXCBz2ja7HvZG7hDpPSNfoo5vs0knK/9hb+rNpu+8kHPgk/Ao4kK3tWtTpSEtvkA9c+wE6UaUdwieNkaHg55tBEtRiEPw1s0+FtrtTcc9two2lhMknV7PZF/cs6+uUFTmpTGbEx7sQCPSLOttHS3GRltqp7SNzVSKzl6aWnZT/CX5k6/v9N3Hh8fHBwffJVjhrC6OgH5dkIt/tPsq+d/PD5Qz7G7efzq1THFjdZVPe/N6ulQ3JnDWSE5junsFsVIiFwL/htf1S5gJ3BfOcUxfHKLnzqpFpyfZ9cX+/5WB6a+Y0pHpzkNrYNVDwMsikK+y7WuLCRg/oFHkA8VT3rDg5ZnU6ktzzINymV0m74Xd5pfIGXyFeVEQSShkzqG7TBBa2OxVRKitLXv7h3uuftXnXq7lz2tZ/WnWa9dx9dCjDhHzmuVQATlmljr9dZErUydSo2Hbi/b1vXtrOeGCk2/8s3ZlO8+ueJT8BVlw5pGw2oYccdSiHHqx0RlabHqdNR9jAETl6PreJcPBnnfpTLnOQ8C3OV8AmQGzouV1iZdeb5SSIoVc8W8/kcDtksUH5FrU6/aqBqNWcMEzxG4DAQ14qRQhi9mWU0rzepKezbjfgCwQKxVYq5ajRgpRqy45CqwkJydcEkbTkvRz8P5/2ZpDTN4nGNgZGBgAOKb6v+/xvPbfGXgZmEAgeuB2kkI+v8bFgbmKiCXg4EJJAoAPyAKhQB4nGNgZGBg1vmvwxDDwgACQJKRARXwAwAzZQHQeJxjYQCCFAYGFgbSMQAcWACdAAAAAAAAAAwALgBgAIQAmADSAQgBIgE8AVABoAHeAfwCHHicY2BkYGDgZ7BgYGMAASYg5gJCBob/YD4DAA/hAWQAeJxlkbtuwkAURMc88gApQomUJoq0TdIQzEOpUDokKCNR0BuzBiO/tF6QSJcPyHflE9Klyyekz2CuG8cr7547M3d9JQO4xjccnJ57vid2cMHqxDWc40G4Tv1JuEF+Fm6ijRfhM+oz4Ra6eBVu4wZvvMFpXLIa40PYQQefwjVc4Uu4Tv1HuEH+FW7i1mkKn6Hj3Am3sHC6wm08Ou8tpSZGe1av1PKggjSxPd8zJtSGTuinyVGa6/Uu8kxZludCmzxMEzV0B6U004k25W35fj2yNlCBSWM1paujKFWZSbfat+7G2mzc7weiu34aczzFNYGBhgfLfcV6iQP3ACkSaj349AxXSN9IT0j16JepOb01doiKbNWt1ovippz6sVYYwsXgX2rGVFIkq7Pl2PNrI6qW6eOshj0xaSq9mpNEZIWs8LZUfOouNkVXxp/d5woqebeYIf4D2J1ywQB4nG3LOw6AIBAE0B384B+PAkgEa+QwNnYmHt+EpXSal5lkSBBnoP8oCFSo0aCFRIceA0ZMmLFAYSW88rmvtMUjG3RiQ9HvpfusM6zWNmtc5H/iPewha50tOt5PS/QBx2IeSwAA") format("woff")}.admonition{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);position:relative;margin:1.5625em 0;padding:0 1.2rem;border-left:.4rem solid rgba(68,138,255,.8);border-radius:.2rem;background-color:rgba(255,255,255,.05);overflow:auto}.admonition>p{margin-top:.8rem}.admonition>.admonition-title{margin:0 -1.2rem;padding:.8rem 1.2rem .8rem 3.6rem;border-bottom:1px solid rgba(68,138,255,.2);background-color:rgba(68,138,255,.1);font-weight:700}.admonition>.admonition-title:before{position:absolute;left:1.2rem;font-size:1.5rem;color:rgba(68,138,255,.8);content:"\E3C9"}.admonition>.admonition-title:before{font-family:Material Icons;font-style:normal;font-variant:normal;font-weight:400;line-height:2rem;text-transform:none;white-space:nowrap;speak:none;word-wrap:normal;direction:ltr}.admonition.abstract,.admonition.summary,.admonition.tldr{border-left-color:rgba(0,176,255,.8)}.admonition.abstract>.admonition-title,.admonition.summary>.admonition-title,.admonition.tldr>.admonition-title{background-color:rgba(0,176,255,.1);border-bottom-color:rgba(0,176,255,.2)}.admonition.abstract>.admonition-title:before,.admonition.summary>.admonition-title:before,.admonition.tldr>.admonition-title:before{color:#00b0ff;content:"\E8D2"}.admonition.hint,.admonition.tip{border-left-color:rgba(0,191,165,.8)}.admonition.hint>.admonition-title,.admonition.tip>.admonition-title{background-color:rgba(0,191,165,.1);border-bottom-color:rgba(0,191,165,.2)}.admonition.hint>.admonition-title:before,.admonition.tip>.admonition-title:before{color:#00bfa5;content:"\E80E"}.admonition.info,.admonition.todo{border-left-color:rgba(0,184,212,.8)}.admonition.info>.admonition-title,.admonition.todo>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.info>.admonition-title:before,.admonition.todo>.admonition-title:before{color:#00b8d4;content:"\E88E"}.admonition.check,.admonition.done,.admonition.success{border-left-color:rgba(0,200,83,.8)}.admonition.check>.admonition-title,.admonition.done>.admonition-title,.admonition.success>.admonition-title{background-color:rgba(0,200,83,.1);border-bottom-color:rgba(0,200,83,.2)}.admonition.check>.admonition-title:before,.admonition.done>.admonition-title:before,.admonition.success>.admonition-title:before{color:#00c853;content:"\E876"}.admonition.faq,.admonition.help,.admonition.question{border-left-color:rgba(100,221,23,.8)}.admonition.faq>.admonition-title,.admonition.help>.admonition-title,.admonition.question>.admonition-title{background-color:rgba(100,221,23,.1);border-bottom-color:rgba(100,221,23,.2)}.admonition.faq>.admonition-title:before,.admonition.help>.admonition-title:before,.admonition.question>.admonition-title:before{color:#64dd17;content:"\E887"}.admonition.attention,.admonition.caution,.admonition.warning{border-left-color:rgba(255,145,0,.8)}.admonition.attention>.admonition-title,.admonition.caution>.admonition-title,.admonition.warning>.admonition-title{background-color:rgba(255,145,0,.1);border-bottom-color:rgba(255,145,0,.2)}.admonition.attention>.admonition-title:before{color:#ff9100;content:"\E417"}.admonition.caution>.admonition-title:before,.admonition.warning>.admonition-title:before{color:#ff9100;content:"\E002"}.admonition.fail,.admonition.failure,.admonition.missing{border-left-color:rgba(255,82,82,.8)}.admonition.fail>.admonition-title,.admonition.failure>.admonition-title,.admonition.missing>.admonition-title{background-color:rgba(255,82,82,.1);border-bottom-color:rgba(255,82,82,.2)}.admonition.fail>.admonition-title:before,.admonition.failure>.admonition-title:before,.admonition.missing>.admonition-title:before{color:#ff5252;content:"\E14C"}.admonition.bug,.admonition.danger,.admonition.error{border-left-color:rgba(255,23,68,.8)}.admonition.bug>.admonition-title,.admonition.danger>.admonition-title,.admonition.error>.admonition-title{background-color:rgba(255,23,68,.1);border-bottom-color:rgba(255,23,68,.2)}.admonition.danger>.admonition-title:before{color:#ff1744;content:"\E3E7"}.admonition.error>.admonition-title:before{color:#ff1744;content:"\E14C"}.admonition.bug>.admonition-title:before{color:#ff1744;content:"\E868"}.admonition.example,.admonition.snippet{border-left-color:rgba(0,184,212,.8)}.admonition.example>.admonition-title,.admonition.snippet>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.example>.admonition-title:before,.admonition.snippet>.admonition-title:before{color:#00b8d4;content:"\E242"}.admonition.cite,.admonition.quote{border-left-color:rgba(158,158,158,.8)}.admonition.cite>.admonition-title,.admonition.quote>.admonition-title{background-color:rgba(158,158,158,.1);border-bottom-color:rgba(158,158,158,.2)}.admonition.cite>.admonition-title:before,.admonition.quote>.admonition-title:before{color:#9e9e9e;content:"\E244"}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
body {
  counter-reset: chapter;
}
h1 {
  counter-reset: sub-chapter;
}
h2 {
  counter-reset: section;
}
h3 {
  counter-reset: sub-section;
}
h4 {
  counter-reset: sub-sub-section;
}
div.TOC ul {
  counter-reset: section;
}
.markdown-preview.markdown-preview h1 {
  background: #dfefff;
  box-shadow: 0px 0px 0px 5px #dfefff;
  border: dashed 2px white;
  padding: 0.2em 0.5em;
}
.markdown-preview.markdown-preview h2 {
  position: relative;
  padding: 0.6em;
  background: #e0edff;
}
.markdown-preview.markdown-preview h2:after {
  position: absolute;
  content: '';
  top: 100%;
  left: 30px;
  border: 15px solid transparent;
  border-top: 15px solid #e0edff;
  width: 0;
  height: 0;
}
.markdown-preview.markdown-preview h3 {
  background: linear-gradient(transparent 70%, #a7d6ff 70%);
}
.markdown-preview.markdown-preview h4 {
  border-bottom: solid 3px #cce4ff;
  position: relative;
}
.markdown-preview.markdown-preview h4:after {
  position: absolute;
  content: " ";
  display: block;
  border-bottom: solid 3px #5472cd;
  bottom: -3px;
  width: 20%;
}
.markdown-preview.markdown-preview h5 {
  border-bottom: solid 3px black;
}
.markdown-preview.markdown-preview h1::before {
  counter-increment: chapter;
  content: counter(chapter) ". ";
}
.markdown-preview.markdown-preview h2::before {
  counter-increment: sub-chapter;
  content: counter(chapter) "." counter(sub-chapter) ". ";
}
.markdown-preview.markdown-preview h3::before {
  counter-increment: section;
  content: counter(chapter) "." counter(sub-chapter) "." counter(section) ". ";
}
.markdown-preview.markdown-preview h4::before {
  counter-increment: sub-section;
}
.markdown-preview.markdown-preview h5::before {
  counter-increment: sub-sub-section;
}
.markdown-preview.markdown-preview div.TOC li {
  list-style: none;
}
.markdown-preview.markdown-preview div.TOC ul > li:before {
  counter-increment: section;
  content: counters(section, '.') '. ';
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="12webapp-nginx">12.webapp Nginx </h1>
<p><a href="">2024/7/18 Table of Contents</a></p>
<div class="TOC">
<div class="code-chunk" data-id="code-chunk-id-0" data-cmd="toc"><div class="input-div"><div class="code-chunk-btn-group"><div class="run-btn btn btn-xs btn-primary"><span>▶︎</span></div><div class="run-all-btn btn btn-xs btn-primary">all</div></div><div class="status">running...</div></div><div class="output-div"></div></div><ol>
<li><a href="#12webapp-nginx">12.webapp Nginx</a>
<ol>
<li><a href="#%E7%9B%AE%E7%9A%84">目的</a></li>
<li><a href="#%E6%A7%8B%E6%88%90%E3%83%87%E3%83%BC%E3%82%BF">構成データ</a></li>
<li><a href="#http%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB">HTTPプロトコル</a></li>
<li><a href="#cgi">CGI</a></li>
<li><a href="#web%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC-nginx">Webサーバー Nginx</a></li>
<li><a href="#nginx--fastcgi">Nginx + FastCGI</a></li>
<li><a href="#web%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3-devctlcgi">Webアプリケーション devctl.cgi</a></li>
<li><a href="#%E3%83%88%E3%83%A9%E3%83%96%E3%83%AB">トラブル</a></li>
<li><a href="#%E3%81%9D%E3%81%AE%E4%BB%96">その他</a></li>
</ol>
</li>
</ol>
</div>
<div style="page-break-before:always"></div>  <!-- PDFで改ページ-->
<h2 id="目的">目的 </h2>
<p>組込みアプリケーション開発 12.webapp</p>
<h2 id="構成データ">構成データ </h2>
<h3 id="mediasf_armadillox1hwpwmworkr06_2024apllication_debugtextpractice-ディレクトリ">/media/sf_ArmadilloX1/hwpwm/work/R06_2024/Apllication_debug/text/practice ディレクトリ </h3>
<details open=""><summary> ･･･/share/ArmadilloX1/hwpwm/<span style="color: red">work</span>/R06_2024/Application<span style="color: red">_debug</span>/<span style="color: red">text</span>/practice/ の構成</summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>user@1204PC-Z490M:/mnt/v/VirtualBoxWork/share/ArmadilloX1/hwpwm/work/R06_2024/Application_debug/text/practice$ tree <span class="token parameter variable">-aF</span> <span class="token parameter variable">-L</span> <span class="token number">3</span>
./
└── <span class="token number">12</span>.webapp/
    ├── devctl.c*               <span class="token operator">&lt;</span>─────課題
    ├── drivers/                <span class="token operator">&lt;</span>───── デバイスドライバ
    │   ├── leds/               <span class="token operator">&lt;</span>───── Nginx は デバイスファイルの <span class="token function">chmod</span> 必要
    │   └── motor/              <span class="token operator">&lt;</span>───── Nginx は デバイスファイルの <span class="token function">chmod</span> 必要
    └── image/
        ├── arrow_l.jpg*        <span class="token operator">&lt;</span>───── 画像ファイル
        ├── arrow_r.jpg*        <span class="token operator">&lt;</span>─────
        ├── fan_off.jpg*        <span class="token operator">&lt;</span>─────
        ├── fan_on.jpg*         <span class="token operator">&lt;</span>─────
        ├── light_off.gif*      <span class="token operator">&lt;</span>─────
        └── light_on.gif*       <span class="token operator">&lt;</span>─────
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h2 id="httpプロトコル">HTTPプロトコル </h2>
<p>参考: <a href="https://jeedjp.sharepoint.com/:b:/s/R5747/Eb-ZoZFjtYBCjZGDKw0Z9B8BKuIDPIaK4lMYHRS8vTmKvQ?e=ZfIdU5">通信プロトコル実装実習(HTTPプロトコルとHTML)</a> のテキスト</p>
<h2 id="cgi">CGI </h2>
<p>参考:<a href="https://jeedjp.sharepoint.com/:b:/s/R5747/EcJSSs43q2ZJvnZFGbU1A4YBkNAkt3pPVfzVnJBhhsO_2g?e=gOLbuH">通信プロトコル実装実習(CGIプログラミング)</a>のテキスト</p>
<h2 id="webサーバー-nginx">Webサーバー Nginx </h2>
<h3 id="nginx-のデータ構成">Nginx のデータ構成 </h3>
<table>
<thead>
<tr>
<th>項目</th>
<th colspan="2">場所</th>

</tr>
</thead>
<tbody>
<tr>
<td>ドキュメントルート</td>
<td>/work/linux/nfsroot/var/www/html/</td>
<td>*.html</td>
</tr>
<tr>
<td>画像データ</td>
<td>/work/linux/nfsroot/var/www/html/image/</td>
<td>*.jpg, *.gif</td>
</tr>
<tr>
<td>CGI保存場所</td>
<td>/work/linux/nfsroot/var/www/cgi-bin/</td>
<td>*.py, *.cgi</td>
</tr>
</tbody>
</table>
<details open=""><summary> atmark@atde8:~$ tree -aF -L 3 /work/linux/nfsroot/var/www/ </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>atmark@atde8:~$ tree <span class="token parameter variable">-aF</span> <span class="token parameter variable">-L</span> <span class="token number">3</span> /work/linux/nfsroot/var/www/
/work/linux/nfsroot/var/www/
├── cgi-bin/                  <span class="token operator">&lt;</span>───── Nginx FastCGI 保存場所
│   ├── devctl.cgi*           <span class="token operator">&lt;</span>───── 課題
│   ├── index.cgi*            <span class="token operator">&lt;</span>───── テスト用（c言語）
│   └── index.py*             <span class="token operator">&lt;</span>───── テスト用（python）
└── html/                     <span class="token operator">&lt;</span>───── ドキュメントルート
    ├── image/                <span class="token operator">&lt;</span>───── 画像ファイル保存場所
    │   ├── arrow_l.jpg*      <span class="token operator">&lt;</span>───── <span class="token number">12</span>.webapp/image からコピーしてきた画像ファイル
    │   ├── arrow_r.jpg*
    │   ├── fan_off.jpg*
    │   ├── fan_on.jpg*
    │   ├── light_off.gif*
    │   └── light_on.gif*
    └── index.nginx-debian.html <span class="token operator">&lt;</span>───── Nginx index.html
<span class="token number">3</span> directories, <span class="token number">8</span> files
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="lighttpd-アンインストールアンインストールしなくても良いかもしれない">lighttpd アンインストール（アンインストールしなくても良いかもしれない） </h3>
<details open=""><summary> root@armadillo:~# apt purge lighttpd </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># apt purge lighttpd</span>
パッケージリストを読み込んでいます<span class="token punctuation">..</span>. 完了
依存関係ツリーを作成しています
状態情報を読み取っています<span class="token punctuation">..</span>. 完了
以下のパッケージが自動でインストールされましたが、もう必要とされていません:
  libevent-core-2.1-6 libevent-pthreads-2.1-6 libfam0 libmariadb3 libopts25
  mariadb-common mysql-common sntp spawn-fcgi
これを削除するには <span class="token string">'apt autoremove'</span> を利用してください。
以下のパッケージは「削除」されます:
  lighttpd* lighttpd-modules-ldap* lighttpd-modules-mysql*
アップグレード: <span class="token number">0</span> 個、新規インストール: <span class="token number">0</span> 個、削除: <span class="token number">3</span> 個、保留: <span class="token number">0</span> 個。
この操作後に <span class="token number">893</span> kB のディスク容量が解放されます。
続行しますか? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span> Y
<span class="token punctuation">(</span>データベースを読み込んでいます <span class="token punctuation">..</span>. 現在 <span class="token number">44793</span> 個のファイルとディレクトリがインストールされています。<span class="token punctuation">)</span>
lighttpd-modules-mysql <span class="token punctuation">(</span><span class="token number">1.4</span>.53-4+deb10u3<span class="token punctuation">)</span> を削除しています <span class="token punctuation">..</span>.
lighttpd-modules-ldap <span class="token punctuation">(</span><span class="token number">1.4</span>.53-4+deb10u3<span class="token punctuation">)</span> を削除しています <span class="token punctuation">..</span>.
lighttpd <span class="token punctuation">(</span><span class="token number">1.4</span>.53-4+deb10u3<span class="token punctuation">)</span> を削除しています <span class="token punctuation">..</span>.
man-db <span class="token punctuation">(</span><span class="token number">2.8</span>.5-2+deb10u1<span class="token punctuation">)</span> のトリガを処理しています <span class="token punctuation">..</span>.
<span class="token punctuation">(</span>データベースを読み込んでいます <span class="token punctuation">..</span>. 現在 <span class="token number">44719</span> 個のファイルとディレクトリがインストールされています。<span class="token punctuation">)</span>
lighttpd <span class="token punctuation">(</span><span class="token number">1.4</span>.53-4+deb10u3<span class="token punctuation">)</span> の設定ファイルを削除しています <span class="token punctuation">..</span>.
dpkg: 警告: lighttpd の削除中、ディレクトリ <span class="token string">'/etc/lighttpd/conf-enabled'</span> が空でないため削除できませんでした
systemd <span class="token punctuation">(</span><span class="token number">241</span>-7~deb10u10<span class="token punctuation">)</span> のトリガを処理しています <span class="token punctuation">..</span>.
root@armadillo:~<span class="token comment">#</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="nginx-インストール">Nginx インストール </h3>
<h5 id="apt-install-nginx-full">apt install nginx-full </h5>
<details open=""><summary> root@armadillo:~# apt install nginx-full </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># apt install nginx-full</span>
パッケージリストを読み込んでいます<span class="token punctuation">..</span>. 完了
依存関係ツリーを作成しています
状態情報を読み取っています<span class="token punctuation">..</span>. 完了
以下のパッケージが自動でインストールされましたが、もう必要とされていません:
  libevent-core-2.1-6 libevent-pthreads-2.1-6 libfam0 libmariadb3 libopts25
  mariadb-common mysql-common sntp spawn-fcgi
これを削除するには <span class="token string">'apt autoremove'</span> を利用してください。
以下の追加パッケージがインストールされます:
  libgd3 libjbig0 libjpeg62-turbo libnginx-mod-http-auth-pam
  libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip
  libnginx-mod-http-image-filter libnginx-mod-http-subs-filter
  libnginx-mod-http-upstream-fair libnginx-mod-http-xslt-filter
  libnginx-mod-mail libnginx-mod-stream libtiff5 libwebp6 libxslt1.1
  nginx-common
提案パッケージ:
  libgd-tools fcgiwrap nginx-doc ssl-cert
以下のパッケージが新たにインストールされます:
  libgd3 libjbig0 libjpeg62-turbo libnginx-mod-http-auth-pam
  libnginx-mod-http-dav-ext libnginx-mod-http-echo libnginx-mod-http-geoip
  libnginx-mod-http-image-filter libnginx-mod-http-subs-filter
  libnginx-mod-http-upstream-fair libnginx-mod-http-xslt-filter
  libnginx-mod-mail libnginx-mod-stream libtiff5 libwebp6 libxslt1.1
  nginx-common nginx-full
アップグレード: <span class="token number">0</span> 個、新規インストール: <span class="token number">18</span> 個、削除: <span class="token number">0</span> 個、保留: <span class="token number">0</span> 個。
<span class="token number">2,566</span> kB のアーカイブを取得する必要があります。
この操作後に追加で <span class="token number">4,428</span> kB のディスク容量が消費されます。
続行しますか? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span> Y
取得:1 http://archive.debian.org/debian buster/main armhf libjpeg62-turbo armhf <span class="token number">1</span>:1.5.2-2+deb10u1 <span class="token punctuation">[</span><span class="token number">113</span> kB<span class="token punctuation">]</span>
取得:2 http://archive.debian.org/debian buster/main armhf libjbig0 armhf <span class="token number">2.1</span>-3.1+b2 <span class="token punctuation">[</span><span class="token number">28.4</span> kB<span class="token punctuation">]</span>
取得:3 http://security.debian.org buster/updates/main armhf libwebp6 armhf <span class="token number">0.6</span>.1-2+deb10u3 <span class="token punctuation">[</span><span class="token number">230</span> kB<span class="token punctuation">]</span>
取得:4 http://security.debian.org buster/updates/main armhf libtiff5 armhf <span class="token number">4.1</span>.0+git191117-2~deb10u9 <span class="token punctuation">[</span><span class="token number">254</span> kB<span class="token punctuation">]</span>
取得:5 http://security.debian.org buster/updates/main armhf libgd3 armhf <span class="token number">2.2</span>.5-5.2+deb10u1 <span class="token punctuation">[</span><span class="token number">117</span> kB<span class="token punctuation">]</span>
取得:6 http://security.debian.org buster/updates/main armhf nginx-common all <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">121</span> kB<span class="token punctuation">]</span>
取得:7 http://security.debian.org buster/updates/main armhf libnginx-mod-http-auth-pam armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">92.5</span> kB<span class="token punctuation">]</span>
取得:8 http://security.debian.org buster/updates/main armhf libxslt1.1 armhf <span class="token number">1.1</span>.32-2.2~deb10u2 <span class="token punctuation">[</span><span class="token number">217</span> kB<span class="token punctuation">]</span>
取得:9 http://security.debian.org buster/updates/main armhf libnginx-mod-http-dav-ext armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">99.2</span> kB<span class="token punctuation">]</span>
取得:10 http://security.debian.org buster/updates/main armhf libnginx-mod-http-echo armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">102</span> kB<span class="token punctuation">]</span>
取得:11 http://security.debian.org buster/updates/main armhf libnginx-mod-http-geoip armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">93.7</span> kB<span class="token punctuation">]</span>
取得:12 http://security.debian.org buster/updates/main armhf libnginx-mod-http-image-filter armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">96.9</span> kB<span class="token punctuation">]</span>
取得:13 http://security.debian.org buster/updates/main armhf libnginx-mod-http-subs-filter armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">95.6</span> kB<span class="token punctuation">]</span>
取得:14 http://security.debian.org buster/updates/main armhf libnginx-mod-http-upstream-fair armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">95.6</span> kB<span class="token punctuation">]</span>
取得:15 http://security.debian.org buster/updates/main armhf libnginx-mod-http-xslt-filter armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">95.2</span> kB<span class="token punctuation">]</span>
取得:16 http://security.debian.org buster/updates/main armhf libnginx-mod-mail armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">122</span> kB<span class="token punctuation">]</span>
取得:17 http://security.debian.org buster/updates/main armhf libnginx-mod-stream armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">139</span> kB<span class="token punctuation">]</span>
取得:18 http://security.debian.org buster/updates/main armhf nginx-full armhf <span class="token number">1.14</span>.2-2+deb10u5 <span class="token punctuation">[</span><span class="token number">453</span> kB<span class="token punctuation">]</span>
<span class="token number">2,566</span> kB を <span class="token number">1</span>秒 で取得しました <span class="token punctuation">(</span><span class="token number">2,043</span> kB/s<span class="token punctuation">)</span>
debconf: delaying package configuration, since apt-utils is not installed
以前に未選択のパッケージ libjpeg62-turbo:armhf を選択しています。
<span class="token punctuation">(</span>データベースを読み込んでいます <span class="token punctuation">..</span>. 現在 <span class="token number">44688</span> 個のファイルとディレクトリがインストールされています。<span class="token punctuation">)</span>
<span class="token punctuation">..</span>./00-libjpeg62-turbo_1%3a1.5.2-2+deb10u1_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libjpeg62-turbo:armhf <span class="token punctuation">(</span><span class="token number">1</span>:1.5.2-2+deb10u1<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libjbig0:armhf を選択しています。
<span class="token punctuation">..</span>./01-libjbig0_2.1-3.1+b2_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libjbig0:armhf <span class="token punctuation">(</span><span class="token number">2.1</span>-3.1+b2<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libwebp6:armhf を選択しています。
<span class="token punctuation">..</span>./02-libwebp6_0.6.1-2+deb10u3_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libwebp6:armhf <span class="token punctuation">(</span><span class="token number">0.6</span>.1-2+deb10u3<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libtiff5:armhf を選択しています。
<span class="token punctuation">..</span>./03-libtiff5_4.1.0+git191117-2~deb10u9_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libtiff5:armhf <span class="token punctuation">(</span><span class="token number">4.1</span>.0+git191117-2~deb10u9<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libgd3:armhf を選択しています。
<span class="token punctuation">..</span>./04-libgd3_2.2.5-5.2+deb10u1_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libgd3:armhf <span class="token punctuation">(</span><span class="token number">2.2</span>.5-5.2+deb10u1<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ nginx-common を選択しています。
<span class="token punctuation">..</span>./05-nginx-common_1.14.2-2+deb10u5_all.deb を展開する準備をしています <span class="token punctuation">..</span>.
nginx-common <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libnginx-mod-http-auth-pam を選択しています。
<span class="token punctuation">..</span>./06-libnginx-mod-http-auth-pam_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libnginx-mod-http-auth-pam <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libxslt1.1:armhf を選択しています。
<span class="token punctuation">..</span>./07-libxslt1.1_1.1.32-2.2~deb10u2_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libxslt1.1:armhf <span class="token punctuation">(</span><span class="token number">1.1</span>.32-2.2~deb10u2<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libnginx-mod-http-dav-ext を選択しています。
<span class="token punctuation">..</span>./08-libnginx-mod-http-dav-ext_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libnginx-mod-http-dav-ext <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libnginx-mod-http-echo を選択しています。
<span class="token punctuation">..</span>./09-libnginx-mod-http-echo_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libnginx-mod-http-echo <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libnginx-mod-http-geoip を選択しています。
<span class="token punctuation">..</span>./10-libnginx-mod-http-geoip_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libnginx-mod-http-geoip <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libnginx-mod-http-image-filter を選択しています。
<span class="token punctuation">..</span>./11-libnginx-mod-http-image-filter_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libnginx-mod-http-image-filter <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libnginx-mod-http-subs-filter を選択しています。
<span class="token punctuation">..</span>./12-libnginx-mod-http-subs-filter_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libnginx-mod-http-subs-filter <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libnginx-mod-http-upstream-fair を選択しています。
<span class="token punctuation">..</span>./13-libnginx-mod-http-upstream-fair_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libnginx-mod-http-upstream-fair <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libnginx-mod-http-xslt-filter を選択しています。
<span class="token punctuation">..</span>./14-libnginx-mod-http-xslt-filter_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libnginx-mod-http-xslt-filter <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libnginx-mod-mail を選択しています。
<span class="token punctuation">..</span>./15-libnginx-mod-mail_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libnginx-mod-mail <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libnginx-mod-stream を選択しています。
<span class="token punctuation">..</span>./16-libnginx-mod-stream_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libnginx-mod-stream <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ nginx-full を選択しています。
<span class="token punctuation">..</span>./17-nginx-full_1.14.2-2+deb10u5_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
nginx-full <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
nginx-common <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
Created symlink /etc/systemd/system/multi-user.target.wants/nginx.service → /lib/systemd/system/nginx.service.
libjbig0:armhf <span class="token punctuation">(</span><span class="token number">2.1</span>-3.1+b2<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libjpeg62-turbo:armhf <span class="token punctuation">(</span><span class="token number">1</span>:1.5.2-2+deb10u1<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libnginx-mod-http-auth-pam <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libnginx-mod-http-geoip <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libwebp6:armhf <span class="token punctuation">(</span><span class="token number">0.6</span>.1-2+deb10u3<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libnginx-mod-http-echo <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libnginx-mod-http-subs-filter <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libxslt1.1:armhf <span class="token punctuation">(</span><span class="token number">1.1</span>.32-2.2~deb10u2<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libtiff5:armhf <span class="token punctuation">(</span><span class="token number">4.1</span>.0+git191117-2~deb10u9<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libnginx-mod-http-dav-ext <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libnginx-mod-mail <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libnginx-mod-stream <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libnginx-mod-http-upstream-fair <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libnginx-mod-http-xslt-filter <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libgd3:armhf <span class="token punctuation">(</span><span class="token number">2.2</span>.5-5.2+deb10u1<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libnginx-mod-http-image-filter <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
nginx-full <span class="token punctuation">(</span><span class="token number">1.14</span>.2-2+deb10u5<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libc-bin <span class="token punctuation">(</span><span class="token number">2.28</span>-10+deb10u4<span class="token punctuation">)</span> のトリガを処理しています <span class="token punctuation">..</span>.
systemd <span class="token punctuation">(</span><span class="token number">241</span>-7~deb10u10<span class="token punctuation">)</span> のトリガを処理しています <span class="token punctuation">..</span>.
man-db <span class="token punctuation">(</span><span class="token number">2.8</span>.5-2+deb10u1<span class="token punctuation">)</span> のトリガを処理しています <span class="token punctuation">..</span>.
root@armadillo:~<span class="token comment">#</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h5 id="nginx-状態確認">Nginx 状態確認 </h5>
<details open=""><summary> root@armadillo:~# systemctl status nginx.service</summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># systemctl status nginx.service</span>
● nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded <span class="token punctuation">(</span>/lib/systemd/system/nginx.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: ena
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Sat <span class="token number">2024</span>-07-13 <span class="token number">17</span>:38:51 JST<span class="token punctuation">;</span> 28s ago
     Docs: man:nginx<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
 Main PID: <span class="token number">3696</span> <span class="token punctuation">(</span>nginx<span class="token punctuation">)</span>
   Memory: <span class="token number">18</span>.0M
   CGroup: /system.slice/nginx.service
           ├─3696 nginx: master process /usr/sbin/nginx <span class="token parameter variable">-g</span> daemon on<span class="token punctuation">;</span> master_proc
           ├─3698 nginx: worker process
           └─3699 nginx: worker process

 <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">17</span>:38:48 armadillo systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Starting A high performance web server and
 <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">17</span>:38:51 armadillo systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Started A high performance web server and
root@armadillo:~<span class="token comment">#</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h5 id="nginx-バージョンチェック">Nginx バージョンチェック </h5>
<details open=""><summary> root@armadillo:~# nginx -v </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># nginx -v</span>
nginx version: nginx/1.14.2
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></pre></details>
<h5 id="span-stylecolor-rednginx-設定ファイルの構文チェックspan"><span style="color: red">Nginx 設定ファイルの構文チェック</span> </h5>
<details open=""><summary> root@armadillo:~# nginx -t </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># nginx -t</span>
nginx: the configuration <span class="token function">file</span> /etc/nginx/nginx.conf syntax is ok
nginx: configuration <span class="token function">file</span> /etc/nginx/nginx.conf <span class="token builtin class-name">test</span> is successful
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></pre></details>
<h3 id="nginx-動作確認">Nginx 動作確認 </h3>
<h5 id="welcome-ページ">Welcome ページ </h5>
<details open=""><summary> http://10.22.91.60</summary>
<p><img src="assets/20240713/2024-07-13_17-44-11.png" alt="alt text"></p>
<p><img src="assets/20240713/2024-07-13_17-44-46.png" alt="alt text"></p>
</details>
<h5 id="indexhtml-の場所">index.html の場所 </h5>
<details open=""><summary> root@armadillo:~# ls -al /var/www/html/ </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># ls -al /var/www/html/</span>
合計 <span class="token number">12</span>
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">17</span>:38 <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">4</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:02 <span class="token punctuation">..</span>
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">612</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">17</span>:38 index.nginx-debian.html
root@armadillo:~<span class="token comment">#</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="nginx-indexpy-の動作確認">Nginx <a href="http://index.py">index.py</a> の動作確認 </h3>
<h4 id="indexpy"><a href="http://index.py">index.py</a> </h4>
<h4 id="apt-install-fcgiwrap">apt install fcgiwrap </h4>
<details open=""><summary> root@armadillo:~# apt install fcgiwrap </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># apt install fcgiwrap</span>
パッケージリストを読み込んでいます<span class="token punctuation">..</span>. 完了
依存関係ツリーを作成しています
状態情報を読み取っています<span class="token punctuation">..</span>. 完了
以下のパッケージが自動でインストールされましたが、もう必要とされていません:
  libevent-core-2.1-6 libevent-pthreads-2.1-6 libfam0 libmariadb3 libopts25
  mariadb-common mysql-common sntp
これを削除するには <span class="token string">'apt autoremove'</span> を利用してください。
以下の追加パッケージがインストールされます:
  libfcgi-bin libfcgi0ldbl
以下のパッケージが新たにインストールされます:
  fcgiwrap libfcgi-bin libfcgi0ldbl
アップグレード: <span class="token number">0</span> 個、新規インストール: <span class="token number">3</span> 個、削除: <span class="token number">0</span> 個、保留: <span class="token number">0</span> 個。
<span class="token number">180</span> kB のアーカイブを取得する必要があります。
この操作後に追加で <span class="token number">535</span> kB のディスク容量が消費されます。
続行しますか? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span> Y
取得:1 http://archive.debian.org/debian buster/main armhf libfcgi0ldbl armhf <span class="token number">2.4</span>.0-10 <span class="token punctuation">[</span><span class="token number">151</span> kB<span class="token punctuation">]</span>
取得:2 http://archive.debian.org/debian buster/main armhf fcgiwrap armhf <span class="token number">1.1</span>.0-12 <span class="token punctuation">[</span><span class="token number">17.4</span> kB<span class="token punctuation">]</span>
取得:3 http://archive.debian.org/debian buster/main armhf libfcgi-bin armhf <span class="token number">2.4</span>.0-10 <span class="token punctuation">[</span><span class="token number">11.6</span> kB<span class="token punctuation">]</span>
<span class="token number">180</span> kB を <span class="token number">2</span>秒 で取得しました <span class="token punctuation">(</span><span class="token number">80.7</span> kB/s<span class="token punctuation">)</span>
debconf: delaying package configuration, since apt-utils is not installed
以前に未選択のパッケージ libfcgi0ldbl:armhf を選択しています。
<span class="token punctuation">(</span>データベースを読み込んでいます <span class="token punctuation">..</span>. 現在 <span class="token number">44856</span> 個のファイルとディレクトリがインストールされています。<span class="token punctuation">)</span>
<span class="token punctuation">..</span>./libfcgi0ldbl_2.4.0-10_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libfcgi0ldbl:armhf <span class="token punctuation">(</span><span class="token number">2.4</span>.0-10<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ fcgiwrap を選択しています。
<span class="token punctuation">..</span>./fcgiwrap_1.1.0-12_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
fcgiwrap <span class="token punctuation">(</span><span class="token number">1.1</span>.0-12<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
以前に未選択のパッケージ libfcgi-bin を選択しています。
<span class="token punctuation">..</span>./libfcgi-bin_2.4.0-10_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libfcgi-bin <span class="token punctuation">(</span><span class="token number">2.4</span>.0-10<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
libfcgi0ldbl:armhf <span class="token punctuation">(</span><span class="token number">2.4</span>.0-10<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
libfcgi-bin <span class="token punctuation">(</span><span class="token number">2.4</span>.0-10<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
fcgiwrap <span class="token punctuation">(</span><span class="token number">1.1</span>.0-12<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
Created symlink /etc/systemd/system/sockets.target.wants/fcgiwrap.socket → /lib/systemd/system/fcgiwrap.socket.
man-db <span class="token punctuation">(</span><span class="token number">2.8</span>.5-2+deb10u1<span class="token punctuation">)</span> のトリガを処理しています <span class="token punctuation">..</span>.
libc-bin <span class="token punctuation">(</span><span class="token number">2.28</span>-10+deb10u4<span class="token punctuation">)</span> のトリガを処理しています <span class="token punctuation">..</span>.
systemd <span class="token punctuation">(</span><span class="token number">241</span>-7~deb10u10<span class="token punctuation">)</span> のトリガを処理しています <span class="token punctuation">..</span>.
root@armadillo:~<span class="token comment">#</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="fcgiwrapconf-の作成">fcgiwrap.conf の作成 </h4>
<details open=""><summary> root@armadillo:~# cp /usr/share/doc/fcgiwrap/examples/nginx.conf /etc/nginx/fcgiwrap.conf </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># cp /usr/share/doc/fcgiwrap/examples/nginx.conf /etc/nginx/fcgiwrap.conf</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span></span></pre><p><img src="assets/20240713/2024-07-13_17-52-04.png" alt="alt text"></p>
</details>
<h5 id="fcgiwrapconf編集前">fcgiwrap.conf（編集前） </h5>
<details open=""><summary> /work/linux/nfsroot/etc/nginx/fcgiwrap.conf </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code><span class="token comment"># Include this file on your nginx.conf to support debian cgi-bin scripts using</span>
<span class="token comment"># fcgiwrap</span>
location /cgi-bin/ <span class="token punctuation">{</span>
  <span class="token comment"># Disable gzip (it makes scripts feel slower since they have to complete</span>
  <span class="token comment"># before getting gzipped)</span>
  <span class="token function">gzip</span> off<span class="token punctuation">;</span>

  <span class="token comment"># Set the root to /usr/lib (inside this location this means that we are</span>
  <span class="token comment"># giving access to the files under /usr/lib/cgi-bin)</span>
  root	/usr/lib<span class="token punctuation">;</span>

  <span class="token comment"># Fastcgi socket</span>
  fastcgi_pass  unix:/var/run/fcgiwrap.socket<span class="token punctuation">;</span>

  <span class="token comment"># Fastcgi parameters, include the standard ones</span>
  include /etc/nginx/fastcgi_params<span class="token punctuation">;</span>

  <span class="token comment"># Adjust non standard parameters (SCRIPT_FILENAME)</span>
  fastcgi_param SCRIPT_FILENAME  /usr/lib<span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h5 id="fcgiwrapconf編集後">fcgiwrap.conf（編集後） </h5>
<details open=""><summary> /work/linux/nfsroot/etc/nginx/fcgiwrap.conf </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code><span class="token comment"># Include this file on your nginx.conf to support debian cgi-bin scripts using</span>
<span class="token comment"># fcgiwrap</span>
location /cgi-bin/ <span class="token punctuation">{</span>
  <span class="token comment"># Disable gzip (it makes scripts feel slower since they have to complete</span>
  <span class="token comment"># before getting gzipped)</span>
  <span class="token function">gzip</span> off<span class="token punctuation">;</span>

  <span class="token comment"># Set the root to /usr/lib (inside this location this means that we are</span>
  <span class="token comment"># giving access to the files under /usr/lib/cgi-bin)</span>
  root	/var/www<span class="token punctuation">;</span>  <span class="token operator">&lt;</span>───────────────────────────────────────────────────────── 変更

  <span class="token comment"># Fastcgi socket</span>
  fastcgi_pass  unix:/var/run/fcgiwrap.socket<span class="token punctuation">;</span>

  <span class="token comment"># Fastcgi parameters, include the standard ones</span>
  include /etc/nginx/fastcgi_params<span class="token punctuation">;</span>

  <span class="token comment"># Adjust non standard parameters (SCRIPT_FILENAME)</span>
  <span class="token comment">#fastcgi_param SCRIPT_FILENAME  /usr/lib$fastcgi_script_name;</span>
  fastcgi_param SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span> <span class="token operator">&lt;</span>──────── 変更
<span class="token punctuation">}</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<details open=""><summary> root@armadillo:~# cat /etc/nginx/fcgiwrap.conf </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># cat /etc/nginx/fcgiwrap.conf</span>
<span class="token comment"># Include this file on your nginx.conf to support debian cgi-bin scripts using</span>
<span class="token comment"># fcgiwrap</span>
location /cgi-bin/ <span class="token punctuation">{</span>
  <span class="token comment"># Disable gzip (it makes scripts feel slower since they have to complete</span>
  <span class="token comment"># before getting gzipped)</span>
  <span class="token function">gzip</span> off<span class="token punctuation">;</span>

  <span class="token comment"># Set the root to /usr/lib (inside this location this means that we are</span>
  <span class="token comment"># giving access to the files under /usr/lib/cgi-bin)</span>
  root  /var/www<span class="token punctuation">;</span>

  <span class="token comment"># Fastcgi socket</span>
  fastcgi_pass  unix:/var/run/fcgiwrap.socket<span class="token punctuation">;</span>

  <span class="token comment"># Fastcgi parameters, include the standard ones</span>
  include /etc/nginx/fastcgi_params<span class="token punctuation">;</span>

  <span class="token comment"># Adjust non standard parameters (SCRIPT_FILENAME)</span>
  <span class="token comment">#fastcgi_param SCRIPT_FILENAME  /usr/lib$fastcgi_script_name;</span>
  fastcgi_param SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="cgi-bin-ディレクトリ作成--パーミション変更">cgi-bin ディレクトリ作成 &amp; パーミション変更 </h4>
<details open=""><summary> root@armadillo:~# mkdir /var/www/cgi-bin </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># mkdir /var/www/cgi-bin</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span></span></pre></details>
<details open=""><summary> root@armadillo:~# chmod 755 /var/www/cgi-bin/ </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># chmod 755 /var/www/cgi-bin/</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span></span></pre></details>
<details open=""><summary> root@armadillo:~# ls -al </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># ls -al /var/www/</span>
合計 <span class="token number">16</span>
drwxr-xr-x  <span class="token number">4</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:02 <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">12</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">17</span>:38 <span class="token punctuation">..</span>
drwxr-xr-x  <span class="token number">2</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:02 cgi-bin
drwxr-xr-x  <span class="token number">2</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">17</span>:38 html
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="sites-availabeldefault-の編集">sites-availabel/default の編集 </h3>
<h4 id="編集前">編集前 </h4>
<details open=""><summary> /work/linux/nfsroot/etc/nginx/sites-available/default </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code><span class="token comment">##</span>
<span class="token comment"># You should look at the following URL's in order to grasp a solid understanding</span>
<span class="token comment"># of Nginx configuration files in order to fully unleash the power of Nginx.</span>
<span class="token comment"># https://www.nginx.com/resources/wiki/start/</span>
<span class="token comment"># https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/</span>
<span class="token comment"># https://wiki.debian.org/Nginx/DirectoryStructure</span>
<span class="token comment">#</span>
<span class="token comment"># In most cases, administrators will remove this file from sites-enabled/ and</span>
<span class="token comment"># leave it as reference inside of sites-available where it will continue to be</span>
<span class="token comment"># updated by the nginx packaging team.</span>
<span class="token comment">#</span>
<span class="token comment"># This file will automatically load configuration files provided by other</span>
<span class="token comment"># applications, such as Drupal or Wordpress. These applications will be made</span>
<span class="token comment"># available underneath a path with that package name, such as /drupal8.</span>
<span class="token comment">#</span>
<span class="token comment"># Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.</span>
<span class="token comment">##</span>

<span class="token comment"># Default server configuration</span>
<span class="token comment">#</span>
server <span class="token punctuation">{</span>
	listen <span class="token number">80</span> default_server<span class="token punctuation">;</span>
	listen <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:80 default_server<span class="token punctuation">;</span>

	<span class="token comment"># SSL configuration</span>
	<span class="token comment">#</span>
	<span class="token comment"># listen 443 ssl default_server;</span>
	<span class="token comment"># listen [::]:443 ssl default_server;</span>
	<span class="token comment">#</span>
	<span class="token comment"># Note: You should disable gzip for SSL traffic.</span>
	<span class="token comment"># See: https://bugs.debian.org/773332</span>
	<span class="token comment">#</span>
	<span class="token comment"># Read up on ssl_ciphers to ensure a secure configuration.</span>
	<span class="token comment"># See: https://bugs.debian.org/765782</span>
	<span class="token comment">#</span>
	<span class="token comment"># Self signed certs generated by the ssl-cert package</span>
	<span class="token comment"># Don't use them in a production server!</span>
	<span class="token comment">#</span>
	<span class="token comment"># include snippets/snakeoil.conf;</span>

	root /var/www/html<span class="token punctuation">;</span>

	<span class="token comment"># Add index.php to the list if you are using PHP</span>
	index index.html index.htm index.nginx-debian.html<span class="token punctuation">;</span>

	server_name _<span class="token punctuation">;</span>

	location / <span class="token punctuation">{</span>
		<span class="token comment"># First attempt to serve request as file, then</span>
		<span class="token comment"># as directory, then fall back to displaying a 404.</span>
		try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ <span class="token operator">=</span><span class="token number">404</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment"># pass PHP scripts to FastCGI server</span>
	<span class="token comment">#</span>
	<span class="token comment">#location ~ \.php$ {</span>
	<span class="token comment">#	include snippets/fastcgi-php.conf;</span>
	<span class="token comment">#</span>
	<span class="token comment">#	# With php-fpm (or other unix sockets):</span>
	<span class="token comment">#	fastcgi_pass unix:/run/php/php7.3-fpm.sock;</span>
	<span class="token comment">#	# With php-cgi (or other tcp sockets):</span>
	<span class="token comment">#	fastcgi_pass 127.0.0.1:9000;</span>
	<span class="token comment">#}</span>

	<span class="token comment"># deny access to .htaccess files, if Apache's document root</span>
	<span class="token comment"># concurs with nginx's one</span>
	<span class="token comment">#</span>
	<span class="token comment">#location ~ /\.ht {</span>
	<span class="token comment">#	deny all;</span>
	<span class="token comment">#}</span>
<span class="token punctuation">}</span>


<span class="token comment"># Virtual Host configuration for example.com</span>
<span class="token comment">#</span>
<span class="token comment"># You can move that to a different file under sites-available/ and symlink that</span>
<span class="token comment"># to sites-enabled/ to enable it.</span>
<span class="token comment">#</span>
<span class="token comment">#server {</span>
<span class="token comment">#	listen 80;</span>
<span class="token comment">#	listen [::]:80;</span>
<span class="token comment">#</span>
<span class="token comment">#	server_name example.com;</span>
<span class="token comment">#</span>
<span class="token comment">#	root /var/www/example.com;</span>
<span class="token comment">#	index index.html;</span>
<span class="token comment">#</span>
<span class="token comment">#	location / {</span>
<span class="token comment">#		try_files $uri $uri/ =404;</span>
<span class="token comment">#	}</span>
<span class="token comment">#}</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="編集後">編集後 </h4>
<details open=""><summary> /work/linux/nfsroot/etc/nginx/sites-available/default </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code><span class="token comment">##</span>
<span class="token comment"># You should look at the following URL's in order to grasp a solid understanding</span>
<span class="token comment"># of Nginx configuration files in order to fully unleash the power of Nginx.</span>
<span class="token comment"># https://www.nginx.com/resources/wiki/start/</span>
<span class="token comment"># https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/</span>
<span class="token comment"># https://wiki.debian.org/Nginx/DirectoryStructure</span>
<span class="token comment">#</span>
<span class="token comment"># In most cases, administrators will remove this file from sites-enabled/ and</span>
<span class="token comment"># leave it as reference inside of sites-available where it will continue to be</span>
<span class="token comment"># updated by the nginx packaging team.</span>
<span class="token comment">#</span>
<span class="token comment"># This file will automatically load configuration files provided by other</span>
<span class="token comment"># applications, such as Drupal or Wordpress. These applications will be made</span>
<span class="token comment"># available underneath a path with that package name, such as /drupal8.</span>
<span class="token comment">#</span>
<span class="token comment"># Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.</span>
<span class="token comment">##</span>

<span class="token comment"># Default server configuration</span>
<span class="token comment">#</span>
server <span class="token punctuation">{</span>
	listen <span class="token number">80</span> default_server<span class="token punctuation">;</span>
	listen <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:80 default_server<span class="token punctuation">;</span>

	<span class="token comment"># SSL configuration</span>
	<span class="token comment">#</span>
	<span class="token comment"># listen 443 ssl default_server;</span>
	<span class="token comment"># listen [::]:443 ssl default_server;</span>
	<span class="token comment">#</span>
	<span class="token comment"># Note: You should disable gzip for SSL traffic.</span>
	<span class="token comment"># See: https://bugs.debian.org/773332</span>
	<span class="token comment">#</span>
	<span class="token comment"># Read up on ssl_ciphers to ensure a secure configuration.</span>
	<span class="token comment"># See: https://bugs.debian.org/765782</span>
	<span class="token comment">#</span>
	<span class="token comment"># Self signed certs generated by the ssl-cert package</span>
	<span class="token comment"># Don't use them in a production server!</span>
	<span class="token comment">#</span>
	<span class="token comment"># include snippets/snakeoil.conf;</span>

	root /var/www/html<span class="token punctuation">;</span>

	<span class="token comment"># Add index.php to the list if you are using PHP</span>
	index index.html index.htm index.nginx-debian.html<span class="token punctuation">;</span>

	server_name myAlmadilloX1.chugoku-pc.ac.jp<span class="token punctuation">;</span> <span class="token operator">&lt;</span>───────────────────────────────────────── 適当

	location / <span class="token punctuation">{</span>
		<span class="token comment"># First attempt to serve request as file, then</span>
		<span class="token comment"># as directory, then fall back to displaying a 404.</span>
		try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ <span class="token operator">=</span><span class="token number">404</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment"># pass PHP scripts to FastCGI server</span>
	<span class="token comment">#</span>
	<span class="token comment">#location ~ \.php$ {</span>
	<span class="token comment">#	include snippets/fastcgi-php.conf;</span>
	<span class="token comment">#</span>
	<span class="token comment">#	# With php-fpm (or other unix sockets):</span>
	<span class="token comment">#	fastcgi_pass unix:/run/php/php7.3-fpm.sock;</span>
	<span class="token comment">#	# With php-cgi (or other tcp sockets):</span>
	<span class="token comment">#	fastcgi_pass 127.0.0.1:9000;</span>
	<span class="token comment">#}</span>

	<span class="token comment"># deny access to .htaccess files, if Apache's document root</span>
	<span class="token comment"># concurs with nginx's one</span>
	<span class="token comment">#</span>
	<span class="token comment">#location ~ /\.ht {</span>
	<span class="token comment">#	deny all;</span>
	<span class="token comment">#}</span>
  include fcgiwrap.conf<span class="token punctuation">;</span> <span class="token operator">&lt;</span>───────────────────────────────────────── 追加


<span class="token comment"># Virtual Host configuration for example.com</span>
<span class="token comment">#</span>
<span class="token comment"># You can move that to a different file under sites-available/ and symlink that</span>
<span class="token comment"># to sites-enabled/ to enable it.</span>
<span class="token comment">#</span>
<span class="token comment">#server {</span>
<span class="token comment">#	listen 80;</span>
<span class="token comment">#	listen [::]:80;</span>
<span class="token comment">#</span>
<span class="token comment">#	server_name example.com;</span>
<span class="token comment">#</span>
<span class="token comment">#	root /var/www/example.com;</span>
<span class="token comment">#	index index.html;</span>
<span class="token comment">#</span>
<span class="token comment">#	location / {</span>
<span class="token comment">#		try_files $uri $uri/ =404;</span>
<span class="token comment">#	}</span>
<span class="token comment">#}</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="チェック">チェック </h4>
<details open=""><summary> root@armadillo:~# nginx -t </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># nginx -t</span>
nginx: the configuration <span class="token function">file</span> /etc/nginx/nginx.conf syntax is ok
nginx: configuration <span class="token function">file</span> /etc/nginx/nginx.conf <span class="token builtin class-name">test</span> is successful
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></pre></details>
<h3 id="nginex-再起動">nginex 再起動 </h3>
<details open=""><summary> root@armadillo:~# systemctl restart nginx.service  </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># systemctl restart nginx.service</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span></span></pre></details>
<h3 id="nginx-状態確認-1">nginx 状態確認 </h3>
<details open=""><summary> root@armadillo:~# systemctl status nginx.service </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># systemctl status nginx.service</span>
● nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded <span class="token punctuation">(</span>/lib/systemd/system/nginx.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: ena
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Sat <span class="token number">2024</span>-07-13 <span class="token number">18</span>:19:58 JST<span class="token punctuation">;</span> 1min 26s ago
     Docs: man:nginx<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
  Process: <span class="token number">4396</span> <span class="token assign-left variable">ExecStartPre</span><span class="token operator">=</span>/usr/sbin/nginx <span class="token parameter variable">-t</span> <span class="token parameter variable">-q</span> <span class="token parameter variable">-g</span> daemon on<span class="token punctuation">;</span> master_process o
  Process: <span class="token number">4418</span> <span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/sbin/nginx <span class="token parameter variable">-g</span> daemon on<span class="token punctuation">;</span> master_process on<span class="token punctuation">;</span> <span class="token punctuation">(</span>code<span class="token operator">=</span>
 Main PID: <span class="token number">4423</span> <span class="token punctuation">(</span>nginx<span class="token punctuation">)</span>
   Memory: <span class="token number">2</span>.0M
   CGroup: /system.slice/nginx.service
           ├─4423 nginx: master process /usr/sbin/nginx <span class="token parameter variable">-g</span> daemon on<span class="token punctuation">;</span> master_proc
           ├─4425 nginx: worker process
           └─4426 nginx: worker process

 <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:19:58 armadillo systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Starting A high performance web server and
 <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:19:58 armadillo systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: nginx.service: Failed to parse PID from <span class="token keyword keyword-fi">fi</span>
 <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:19:58 armadillo systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Started A high performance web server and
root@armadillo:~<span class="token comment">#</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="indexpy-1"><a href="http://index.py">index.py</a> </h3>
<details open=""><summary> /var/www/cgi-bin/index.py の新規作成 </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code><span class="token shebang important">#!/usr/bin/env python</span>

print <span class="token string">"Content-type: text/html<span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span>"</span>
print <span class="token string">"&lt;html&gt;<span class="token entity" title="\n">\n</span>&lt;body&gt;"</span>
print <span class="token string">"&lt;div style=<span class="token entity" title="\&quot;">\"</span>width: 100%; font-size: 40px; font-weight: bold; text-align: center;<span class="token entity" title="\&quot;">\"</span>&gt;"</span>
print <span class="token string">"Python Script Test Page"</span>
print <span class="token string">"&lt;/div&gt;<span class="token entity" title="\n">\n</span>&lt;/body&gt;<span class="token entity" title="\n">\n</span>&lt;/html&gt;"</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<details open=""><summary> root@armadillo:/var/www/cgi-bin# touch index.py </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># cd /var/www/cgi-bin/</span>

root@armadillo:/var/www/cgi-bin<span class="token comment"># touch index.py</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></pre></details>
<details open=""><summary> root@armadillo:/var/www/cgi-bin# cat index.py </summary>
<pre data-role="codeBlock" data-info="py{.line-numbers}" class="language-python py line-numbers"><code>root@armadillo<span class="token punctuation">:</span><span class="token operator">/</span>var<span class="token operator">/</span>www<span class="token operator">/</span>cgi<span class="token operator">-</span><span class="token builtin">bin</span><span class="token comment"># cat index.py</span>
<span class="token comment">#!/usr/bin/env python</span>

<span class="token keyword keyword-print">print</span> <span class="token string">"Content-type: text/html\n\n"</span>
<span class="token keyword keyword-print">print</span> <span class="token string">"&lt;html&gt;\n&lt;body&gt;"</span>
<span class="token keyword keyword-print">print</span> <span class="token string">"&lt;div style=\"width: 100%; font-size: 40px; font-weight: bold; text-align: center;\"&gt;"</span>
<span class="token keyword keyword-print">print</span> <span class="token string">"Python Script Test Page"</span>
<span class="token keyword keyword-print">print</span> <span class="token string">"&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;"</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="パーミションの変更">パーミションの変更 </h4>
<details open=""><summary> root@armadillo:/var/www/cgi-bin# chmod 755 index.py </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:/var/www/cgi-bin<span class="token comment"># chmod 755 index.py</span>

root@armadillo:/var/www/cgi-bin<span class="token comment"># ls -al</span>
合計 <span class="token number">12</span>
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:23 <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">4</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:02 <span class="token punctuation">..</span>
-rwxr-xr-x <span class="token number">1</span> root root  <span class="token number">240</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:24 index.py
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="indexpy-確認"><a href="http://index.py">index.py</a> 確認 </h3>
<details open=""><summary> http://10.22.91.60/cgi-bin/index.py </summary>
<pre class="language-text">![alt text](assets/20240713/2024-07-13_18-28-57.png)
</pre>
<p><img src="assets/20240713/2024-07-13_18-29-23.png" alt="alt text"></p>
</details>
<h2 id="nginx--fastcgi">Nginx + FastCGI </h2>
<p><a href="https://fastcgi-archives.github.io/FastCGI_Developers_Kit_FastCGI.html">FastCGI Developer's Kit</a></p>
<h3 id="worklinuxnfsrootetcnginxfcgiwrapconf-再編集">/work/linux/nfsroot/etc/nginx/fcgiwrap.conf （再編集） </h3>
<details open=""><summary> /work/linux/nfsroot/etc/nginx/fcgiwrap.conf </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code><span class="token comment"># Include this file on your nginx.conf to support debian cgi-bin scripts using</span>
<span class="token comment"># fcgiwrap</span>
location /cgi-bin/ <span class="token punctuation">{</span>
  <span class="token comment"># Disable gzip (it makes scripts feel slower since they have to complete</span>
  <span class="token comment"># before getting gzipped)</span>
  <span class="token function">gzip</span> off<span class="token punctuation">;</span>

  <span class="token comment"># Set the root to /usr/lib (inside this location this means that we are</span>
  <span class="token comment"># giving access to the files under /usr/lib/cgi-bin)</span>
  root	/var/www<span class="token punctuation">;</span>

  <span class="token comment"># Fastcgi socket</span>
  fastcgi_pass  unix:/var/run/fcgiwrap.socket<span class="token punctuation">;</span>

  <span class="token comment"># Fastcgi parameters, include the standard ones</span>
  include /etc/nginx/fastcgi_params<span class="token punctuation">;</span>

  <span class="token comment"># Adjust non standard parameters (SCRIPT_FILENAME)</span>
  <span class="token comment">#fastcgi_param SCRIPT_FILENAME  /usr/lib$fastcgi_script_name;</span>
  fastcgi_param SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>

  fastcgi_index index.cgi<span class="token punctuation">;</span> <span class="token operator">&lt;</span>──────────────────────────────────────── 追加

<span class="token punctuation">}</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="apt-install-libfcgi-dev不要かも">apt install libfcgi-dev（不要かも） </h3>
<details open=""><summary> root@armadillo:~# apt install libfcgi-dev </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># apt install libfcgi-dev</span>
パッケージリストを読み込んでいます<span class="token punctuation">..</span>. 完了
依存関係ツリーを作成しています
状態情報を読み取っています<span class="token punctuation">..</span>. 完了
以下のパッケージが自動でインストールされましたが、もう必要とされていません:
  libevent-core-2.1-6 libevent-pthreads-2.1-6 libfam0 libmariadb3 libopts25
  mariadb-common mysql-common sntp
これを削除するには <span class="token string">'apt autoremove'</span> を利用してください。
以下のパッケージが新たにインストールされます:
  libfcgi-dev
アップグレード: <span class="token number">0</span> 個、新規インストール: <span class="token number">1</span> 個、削除: <span class="token number">0</span> 個、保留: <span class="token number">0</span> 個。
<span class="token number">29.6</span> kB のアーカイブを取得する必要があります。
この操作後に追加で <span class="token number">106</span> kB のディスク容量が消費されます。
取得:1 http://archive.debian.org/debian buster/main armhf libfcgi-dev armhf <span class="token number">2.4</span>.0-10 <span class="token punctuation">[</span><span class="token number">29.6</span> kB<span class="token punctuation">]</span>
<span class="token number">29.6</span> kB を <span class="token number">1</span>秒 で取得しました <span class="token punctuation">(</span><span class="token number">27.7</span> kB/s<span class="token punctuation">)</span>
debconf: delaying package configuration, since apt-utils is not installed
以前に未選択のパッケージ libfcgi-dev:armhf を選択しています。
<span class="token punctuation">(</span>データベースを読み込んでいます <span class="token punctuation">..</span>. 現在 <span class="token number">44913</span> 個のファイルとディレクトリがインストールされています。<span class="token punctuation">)</span>
<span class="token punctuation">..</span>./libfcgi-dev_2.4.0-10_armhf.deb を展開する準備をしています <span class="token punctuation">..</span>.
libfcgi-dev:armhf <span class="token punctuation">(</span><span class="token number">2.4</span>.0-10<span class="token punctuation">)</span> を展開しています<span class="token punctuation">..</span>.
libfcgi-dev:armhf <span class="token punctuation">(</span><span class="token number">2.4</span>.0-10<span class="token punctuation">)</span> を設定しています <span class="token punctuation">..</span>.
root@armadillo:~<span class="token comment">#</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="apt-install-spawn-fcgi不要かも要調査">apt install spawn-fcgi（不要かも要調査） </h3>
<details open=""><summary> root@armadillo:~# apt install spawn-fcgi </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># apt install spawn-fcgi</span>
パッケージリストを読み込んでいます<span class="token punctuation">..</span>. 完了
依存関係ツリーを作成しています
状態情報を読み取っています<span class="token punctuation">..</span>. 完了
spawn-fcgi はすでに最新バージョン <span class="token punctuation">(</span><span class="token number">1.6</span>.4-2<span class="token punctuation">)</span> です。
spawn-fcgi は手動でインストールしたと設定されました。
以下のパッケージが自動でインストールされましたが、もう必要とされていません:
  libevent-core-2.1-6 libevent-pthreads-2.1-6 libfam0 libmariadb3 libopts25
  mariadb-common mysql-common sntp
これを削除するには <span class="token string">'apt autoremove'</span> を利用してください。
アップグレード: <span class="token number">0</span> 個、新規インストール: <span class="token number">0</span> 個、削除: <span class="token number">0</span> 個、保留: <span class="token number">0</span> 個。
root@armadillo:~<span class="token comment">#</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="nginx再起動">Nginx再起動 </h4>
<details open=""><summary> root@armadillo:~# nginx -t </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># nginx -t</span>
nginx: the configuration <span class="token function">file</span> /etc/nginx/nginx.conf syntax is ok
nginx: configuration <span class="token function">file</span> /etc/nginx/nginx.conf <span class="token builtin class-name">test</span> is successful
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></pre></details>
<details open=""><summary> root@armadillo:~# systemctl restart nginx.service </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># systemctl restart nginx.service</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span></span></pre></details>
<h3 id="c言語によるfastcgi-テスト">C言語によるFastCGI テスト </h3>
<h4 id="ソース">ソース </h4>
<h5 id="indexc">index.c </h5>
<details open=""><summary> atmark@atde8:/media/sf_ArmadilloX1/hwpwm/work/R06_2024/Application_debug/text/practice-example/12.webapp$ cat index.c </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>atmark@atde8:/media/sf_ArmadilloX1/hwpwm/work/R06_2024/Application_debug/text/practice-example/12.webapp$ <span class="token function">cat</span> index.c
</code><span aria-hidden="true" class="line-numbers-rows"><span></span></span></pre></details>
<h5 id="makefile">Makefile </h5>
<details open=""><summary> $ cat Makefile</summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>CC <span class="token operator">=</span> arm-linux-gnueabihf-gcc
TARGET <span class="token operator">=</span> index <span class="token operator">&lt;</span>─────────────────────────────────────── 変更
<span class="token comment">#CFLAGS = -I/work/linux/nfsroot/usr/local/include</span>
CFLAGS_DEBUG <span class="token operator">=</span>  -gdwarf-2 <span class="token parameter variable">-O0</span>
<span class="token comment">#LDFLAGS = -L/work/linux/nfsroot/usr/local/lib</span>
<span class="token comment">#LIBS = -lts</span>

all: <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>

devctl: devctl.c
	<span class="token variable"><span class="token variable">$(</span>CC<span class="token variable">)</span></span> <span class="token parameter variable">-o</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.cgi $^ <span class="token variable"><span class="token variable">$(</span>CFLAGS<span class="token variable">)</span></span> <span class="token variable"><span class="token variable">$(</span>CFLAGS_DEBUG<span class="token variable">)</span></span>

index <span class="token builtin class-name">:</span> index.c
	<span class="token variable"><span class="token variable">$(</span>CC<span class="token variable">)</span></span> <span class="token parameter variable">-o</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.cgi $^ <span class="token variable"><span class="token variable">$(</span>CFLAGS<span class="token variable">)</span></span> <span class="token variable"><span class="token variable">$(</span>CFLAGS_DEBUG<span class="token variable">)</span></span>

myinstall <span class="token builtin class-name">:</span>
	<span class="token function">cp</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.cgi /work/linux/nfsroot/var/www/cgi-bin/
	<span class="token function">chmod</span> <span class="token number">755</span>           /work/linux/nfsroot/var/www/cgi-bin/<span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.cgi
	<span class="token function">cp</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.cgi /media/sf_ArmadilloX1/hwpwm/dbg/debug_share_hwpwm/R06_2024/04_practice
	<span class="token function">cp</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.c   /media/sf_ArmadilloX1/hwpwm/dbg/debug_share_hwpwm/R06_2024/04_practice
	<span class="token function">cp</span> <span class="token parameter variable">-r</span> ./image       /work/linux/nfsroot/var/www/html/
	<span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">755</span>        /work/linux/nfsroot/var/www/html/image

clean:
	<span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>

.PHONY: clean
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="make">make </h4>
<details open=""><summary> $ make index </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>atmark@atde8:/media/sf_ArmadilloX1/hwpwm/work/R06_2024/Application_debug/text/practice-example/12.webapp$ <span class="token function">make</span>
arm-linux-gnueabihf-gcc <span class="token parameter variable">-o</span> index.cgi index.c  -gdwarf-2 <span class="token parameter variable">-O0</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></pre></details>
<h4 id="sudo-make-myinstall">sudo make myinstall </h4>
<details open=""><summary> $ sudo make myinstall </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>atmark@atde8:/media/sf_ArmadilloX1/hwpwm/work/R06_2024/Application_debug/text/practice-example/12.webapp$ <span class="token function">sudo</span> <span class="token function">make</span> myinstall
<span class="token function">cp</span> <span class="token parameter variable">-p</span> index.cgi /work/linux/nfsroot/var/www/cgi-bin/
<span class="token function">chmod</span> <span class="token number">755</span> /work/linux/nfsroot/var/www/cgi-bin/devctl.cgi
<span class="token function">cp</span> <span class="token parameter variable">-p</span> index.cgi /media/sf_ArmadilloX1/hwpwm/dbg/debug_share_hwpwm/R06_2024/04_practice
<span class="token function">cp</span> <span class="token parameter variable">-p</span> index.c   /media/sf_ArmadilloX1/hwpwm/dbg/debug_share_hwpwm/R06_2024/04_practice
<span class="token function">cp</span> <span class="token parameter variable">-r</span> ./image       /work/linux/nfsroot/var/www/cgi-bin/
<span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">755</span>        /work/linux/nfsroot/var/www/html/image
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="パーミションの確認">パーミションの確認 </h4>
<details open=""><summary> root@armadillo:/var/www/cgi-bin# ls -al </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:/var/www/cgi-bin<span class="token comment"># ls -al</span>
合計 <span class="token number">24</span>
drwxr-xr-x <span class="token number">2</span> root root  <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">14</span> <span class="token number">18</span>:14 <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">4</span> root root  <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:02 <span class="token punctuation">..</span>
-rwxr-xr-x <span class="token number">1</span> root  <span class="token number">998</span> <span class="token number">10856</span>  <span class="token number">7</span>月 <span class="token number">14</span> <span class="token number">18</span>:13 index.cgi
-rwxr-xr-x <span class="token number">1</span> root root   <span class="token number">240</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:24 index.py
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="indexcgi-の動作確認">index.cgi の動作確認 </h3>
<details open=""><summary> http://10.22.91.60/cgi-bin/index.cgi </summary>
<p><img src="assets/20240714/2024-07-14_18-15-07.png" alt="alt text"></p>
<p><img src="assets/20240714/2024-07-14_18-35-24.png" alt="alt text"></p>
</details>
<h2 id="webアプリケーション-devctlcgi">Webアプリケーション devctl.cgi </h2>
<h3 id="仕様">仕様 </h3>
<h4 id="ネットワーク構成">ネットワーク構成 </h4>
<p><img src="assets/webnetwork.png" alt="Alt text"></p>
<h4 id="画面レイアウト例">画面レイアウト例 </h4>
<p><img src="assets/2023-09-18_15-28-38.png" alt="Alt text"></p>
<details open=""><summary> chrome メニュー「その他のルール」-「デベロッパーモード」</summary>
<p><img src="assets/20240715/2024-07-15_14-25-32.png" alt="alt text"></p>
<p>Webページを「名前を付けて保存」<br>
<a href="assets/20240715/Device%20Control.html">DeviceControl.html</a></p>
<pre data-role="codeBlock" data-info="HTML{.line-numbers}" class="language-html HTML line-numbers"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Device Control<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">data-emotion</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css<span class="token punctuation">"</span></span> <span class="token attr-name">data-s</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">transition</span><span class="token punctuation">:</span> margin <span class="token number">0.25</span><span class="token unit">s</span> <span class="token function">cubic-bezier</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token unit">s</span><span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token unit">px</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>照明1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>照明2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>照明3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>照明4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>照明5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>照明6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>照明7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>照明8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?lc=1<span class="token entity named-entity" title="&amp;">&amp;amp;</span>mv=50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/light_on.gif<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?lc=2<span class="token entity named-entity" title="&amp;">&amp;amp;</span>mv=50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/light_on.gif<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?lc=3<span class="token entity named-entity" title="&amp;">&amp;amp;</span>mv=50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/light_off.gif<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?lc=4<span class="token entity named-entity" title="&amp;">&amp;amp;</span>mv=50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/light_off.gif<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?lc=5<span class="token entity named-entity" title="&amp;">&amp;amp;</span>mv=50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/light_off.gif<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?lc=6<span class="token entity named-entity" title="&amp;">&amp;amp;</span>mv=50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/light_off.gif<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?lc=7<span class="token entity named-entity" title="&amp;">&amp;amp;</span>mv=50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/light_off.gif<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?lc=8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>mv=50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/light_off.gif<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?mv=40<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/arrow_l.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> 50 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?mv=60<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/arrow_r.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>?mc=50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/image/fan_off.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>devctl.cgi<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>更新<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vt-sidebar-root<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vt-sidebar-container<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css-1xahjpf css-1gfm7th css-1yw75t3 css-azetmj css-i87elh <span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
                <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">user-select</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span><span class="token color"><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">131</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span></span> <span class="token number">0</span><span class="token unit">%</span><span class="token punctuation">,</span> <span class="token color"><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">176</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">)</span></span> <span class="token number">100</span><span class="token unit">%</span><span class="token punctuation">)</span> <span class="token number">30</span> <span class="token operator">/</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span> stretch<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">250</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">%</span><span class="token punctuation">;</span> <span class="token property">max-width</span><span class="token punctuation">:</span> <span class="token number">716</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">min-width</span><span class="token punctuation">:</span> <span class="token number">250</span><span class="token unit">px</span><span class="token punctuation">;</span> <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span> <span class="token property">flex-shrink</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">%</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">0</span><span class="token unit">%</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vt-sidebar-iframe<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css-19x99hd<span class="token punctuation">"</span></span>
                            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chrome-extension://pddljdmihkpdfpkgmbhdomeeifpklgnm/sidebar.html<span class="token punctuation">"</span></span>
                            <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background-position</span><span class="token punctuation">:</span> center center<span class="token punctuation">;</span> <span class="token property">background-repeat</span><span class="token punctuation">:</span> no-repeat<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">vh</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-preview-frame-root<span class="token punctuation">"</span></span>
        <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">transition</span><span class="token punctuation">:</span> all <span class="token number">0.1</span><span class="token unit">s</span> ease-in-out <span class="token number">0</span><span class="token unit">s</span><span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span> <span class="token property">z-index</span><span class="token punctuation">:</span> <span class="token number">-100</span><span class="token punctuation">;</span> <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vt-update-notice<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="初期状態">初期状態 </h4>
<ul>
<li>初回アクセスで現在のデバイスの状態表示</li>
</ul>
<h4 id="照明コントロール機能の仕様">照明コントロール機能の仕様 </h4>
<ul>
<li>照明1～8のいずれかのアイコンがクリックされたら、LEDの点灯・消灯を切り替え</li>
<li>LED消灯中は灰色の電球アイコン、点灯中は緑色の電球アイコンを表示</li>
</ul>
<h4 id="換気扇コントロール機能の仕様">換気扇コントロール機能の仕様 </h4>
<ul>
<li>初期状態はモータ停止、回転速度の初期値は50</li>
<li>現在のモータ速度を左矢印ボタンと右矢印ボタンの間に表示</li>
<li>モータ停止時に換気扇アイコンがクリックされたら、表示されている速度でモータを回転</li>
<li>モータ動作中に換気扇アイコンがクリックされたらモータを停止。表示速度は変更しない</li>
<li>左矢印アイコンがクリックされたらモータ速度表示を10減。下限0</li>
<li>右矢印アイコンがクリックされたらモータ速度表示を10増。上限100</li>
<li>モータ速度変更時、モータ動作中であれば直ちにモータの速度を変更</li>
<li>モータ停止中は水色の換気扇アイコン、モータ動作中はオレンジの換気扇アイコンを表示</li>
</ul>
<h4 id="利用する画像データ">利用する画像データ </h4>
<table>
<thead>
<tr>
<th>画像</th>
<th>識別子</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="assets/light_off.gif" alt="Alt text"></td>
<td>/image/light_off.gif</td>
<td>照明 OFF</td>
</tr>
<tr>
<td><img src="assets/light_on.gif" alt="Alt text"></td>
<td>/image/light_on.gif</td>
<td>照明 ON</td>
</tr>
<tr>
<td><img src="assets/fan_off.jpg" alt="Alt text"></td>
<td>/image/fan_off.jpg</td>
<td>換気扇 OFF</td>
</tr>
<tr>
<td><img src="assets/fan_on.jpg" alt="Alt text"></td>
<td>/image/fan_on.jpg</td>
<td>換気扇 ON</td>
</tr>
<tr>
<td><img src="assets/arrow_l.jpg" alt="Alt text"></td>
<td>/image/arrow_l.jpg</td>
<td>回転速度減少</td>
</tr>
<tr>
<td><img src="assets/arrow_r.jpg" alt="Alt text"></td>
<td>/image/arrow_r.jpg</td>
<td>回転速度増加</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">画像ファイルのパーミションに注意すること</p>
</div>
<details open=""><summary> $ sudo cp image -dR /work/linux/nfsroot/var/www/html/ </summary>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>atmark@atde8:/media/sf_ArmadilloX1/hwpwm/work/R06_2024/Application_debug/text/practice-example/12.webapp$ <span class="token function">sudo</span> <span class="token function">cp</span> image <span class="token parameter variable">-dR</span> /work/linux/nfsroot/var/www/html/
</code></pre></details>
<details open=""><summary> root@armadillo:/var/www# chmod -R 755 html/image</summary>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>root@armadillo:/var/www<span class="token comment"># chmod -R 755 html/image</span>
</code></pre></details>
<details open=""><summary> root@armadillo:/var/www# ls -al </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:/var/www<span class="token comment"># ls -al</span>
合計 <span class="token number">16</span>
drwxr-xr-x  <span class="token number">4</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:04 <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">12</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">17</span>:38 <span class="token punctuation">..</span>
drwxr-xr-x  <span class="token number">2</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:04 cgi-bin
drwxr-xr-x  <span class="token number">3</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">13</span>:31 html

root@armadillo:/var/www<span class="token comment"># ls -la html/</span>
合計 <span class="token number">16</span>
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">13</span>:31 <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">4</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:04 <span class="token punctuation">..</span>
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">13</span>:31 image
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">612</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">17</span>:38 index.nginx-debian.html

root@armadillo:/var/www<span class="token comment"># ls -la html/image/</span>
合計 <span class="token number">40</span>
drwxr-xr-x <span class="token number">2</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">13</span>:31 <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">13</span>:31 <span class="token punctuation">..</span>
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">1757</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:52 arrow_l.jpg
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">1922</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:52 arrow_r.jpg
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">4792</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:52 fan_off.jpg
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">4507</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:52 fan_on.jpg
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">1822</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:52 light_off.gif
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">1865</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:52 light_on.gif
root@armadillo:/var/www<span class="token comment">#</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="cgiプログラム">CGIプログラム </h3>
<h4 id="構成">構成 </h4>
<p><img src="assets/cgi.png" alt="Alt text"></p>
<h4 id="cgiへのパラメータ">CGIへのパラメータ </h4>
<p>GETメソッドで以下のパラメータをCGIプログラムへ渡す</p>
<table>
<thead>
<tr>
<th>パラメータ</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>lc=n</td>
<td>照明のON･OFF n=1～8</td>
</tr>
<tr>
<td>mv=n</td>
<td>換気扇の回転速度変更 n=1～100</td>
</tr>
<tr>
<td>mc=n</td>
<td>換気扇のON･OFF n=1～100</td>
</tr>
</tbody>
</table>
<h5 id="getメソッドの例">GETメソッドの例 </h5>
<p>http://(ArmadilloX1のIPアドレス):80/cgi-bin/devctl.cgi<span style="color: red">?</span>lc=1<span style="color: red">&amp;</span>mv=40</p>
<h4 id="devctlcgi-のソース-devctlc">devctl.cgi のソース devctl.c </h4>
<details open=""><summary> 12.webapp/devctl.c </summary>
<pre data-role="codeBlock" data-info="c{.line-numbers}" class="language-c c line-numbers"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fcntl.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;errno.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LED_FILE</span>	<span class="token string">"/sys/class/leds/led_ext/brightness"</span> <span class="token expression"><span class="token operator">&lt;</span>───────― chmod <span class="token number">777</span> 必要</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MOTOR_FILE</span>	<span class="token string">"/sys/class/motor/motor0/motor_rotation"</span> <span class="token expression"><span class="token operator">&lt;</span>── chmod <span class="token number">777</span> 必要</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BUFSIZE</span>		<span class="token expression"><span class="token number">16</span></span></span>

<span class="token keyword keyword-int">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> argc<span class="token punctuation">,</span> <span class="token keyword keyword-char">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword keyword-int">int</span> fd_led<span class="token punctuation">,</span> fd_mt<span class="token punctuation">;</span>
	<span class="token keyword keyword-int">int</span> val_led<span class="token punctuation">,</span> val_mt<span class="token punctuation">;</span>
	<span class="token keyword keyword-int">int</span> q_val<span class="token punctuation">;</span>
	<span class="token keyword keyword-int">int</span> ret<span class="token punctuation">;</span>
	<span class="token keyword keyword-char">char</span> <span class="token operator">*</span>p<span class="token punctuation">,</span> <span class="token operator">*</span>q<span class="token punctuation">;</span>
	<span class="token keyword keyword-int">int</span> i<span class="token punctuation">;</span>
	<span class="token keyword keyword-char">char</span> buf<span class="token punctuation">[</span>BUFSIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword keyword-int">int</span> motor_on <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token comment">/*** Question 1 ***/</span>

	<span class="token comment">/*** Question 2 ***/</span>

	<span class="token comment">// 環境変数QUERY_STRINGからパラメータを取得します。</span>
	q <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-char">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">getenv</span><span class="token punctuation">(</span><span class="token string">"QUERY_STRING"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 取得したパラメータを処理するまで繰り返します。</span>
	<span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">{</span>
		p <span class="token operator">=</span> <span class="token function">strchr</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> <span class="token char">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">)</span>
			<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>

		<span class="token comment">// パラメータから"lc"を探します。</span>
		<span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">strncmp</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> <span class="token string">"lc="</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			q_val <span class="token operator">=</span> <span class="token function">strtol</span><span class="token punctuation">(</span>q <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">/*** Question 3 ***/</span>

		<span class="token comment">// パラメータから"mv"を探します。</span>
		<span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">strncmp</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> <span class="token string">"mv="</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			q_val <span class="token operator">=</span> <span class="token function">strtol</span><span class="token punctuation">(</span>q <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// q_valの値に基づいてモータの駆動状態を変更します。</span>
			<span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>val_mt<span class="token punctuation">)</span><span class="token punctuation">{</span>
				ret <span class="token operator">=</span> <span class="token function">dprintf</span><span class="token punctuation">(</span>fd_mt<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> q_val<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>ret <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
					<span class="token keyword keyword-goto">goto</span> print_err<span class="token punctuation">;</span>
				motor_on <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			val_mt <span class="token operator">=</span> q_val<span class="token punctuation">;</span>

		<span class="token comment">// パラメータから"mc"を探します。</span>
		<span class="token punctuation">}</span> <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">strncmp</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> <span class="token string">"mc="</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			q_val <span class="token operator">=</span> <span class="token function">strtol</span><span class="token punctuation">(</span>q <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">/*** Question 4 ***/</span>

			<span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>ret <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token keyword keyword-goto">goto</span> print_err<span class="token punctuation">;</span>
			motor_on <span class="token operator">=</span> val_mt <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
			val_mt <span class="token operator">=</span> q_val<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// パラメータがなければ、繰り返しを抜けます。</span>
		q <span class="token operator">=</span> <span class="token punctuation">(</span>p <span class="token operator">?</span> p <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// val_mtが0なら初期値をセットします。</span>
	<span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>val_mt <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
		val_mt <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>

	<span class="token comment">// LEDデバイスをクローズします。</span>
	<span class="token function">close</span><span class="token punctuation">(</span>fd_led<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// モータデバイスをクローズします。</span>
	<span class="token function">close</span><span class="token punctuation">(</span>fd_mt<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/*** Question 5 ***/</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;html&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;head&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;title&gt;Device Control&lt;/title&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/head&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;body&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;table&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;tr&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 「照明」の文字を並べます。</span>
	<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;td align=\"center\"&gt;照明%d&lt;/td&gt;\n"</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/tr&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;tr&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// 電球アイコンを表示し、並べます。</span>
	<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">,</span> val_led <span class="token operator">&gt;&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;td&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;a href=\"?lc=%d&amp;mv=%d\"&gt;"</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> val_mt<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">/*** Question 6 ***/</span>

		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/a&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/td&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/tr&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/table&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;hr&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;table&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;tr&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;td&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/*** Question 7 ***/</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/td&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;td&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;font size=\"7\"&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">" %d "</span><span class="token punctuation">,</span> val_mt<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/font&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/td&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;td&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/*** Question 8 ***/</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/td&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;td&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/*** Question 9 ***/</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/a&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/td&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/tr&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/table&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;hr&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;a href=\"devctl.cgi\"&gt;更新&lt;/a&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/body&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/html&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

print_err<span class="token operator">:</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Content-type: text/html\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;html&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;head&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;title&gt;Device Control Error&lt;/title&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/head&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;body&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> <span class="token function">strerror</span><span class="token punctuation">(</span>errno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/body&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"&lt;/html&gt;\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword keyword-return">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<table>
<thead>
<tr>
<th>項目</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>Q1</td>
<td>必要なデバイスオープン</td>
</tr>
<tr>
<td>Q2</td>
<td>デバイスの現在の値を取得</td>
</tr>
<tr>
<td>Q3</td>
<td>LEDの点灯状態を変更</td>
</tr>
<tr>
<td>Q4</td>
<td>モータの回転状態を変更</td>
</tr>
<tr>
<td>Q5</td>
<td>HTTPヘッダ</td>
</tr>
<tr>
<td>Q6</td>
<td>電球アイコンの表示</td>
</tr>
<tr>
<td>Q7</td>
<td>左矢印アイコンの表示</td>
</tr>
<tr>
<td>Q8</td>
<td>右矢印アイコンの表示</td>
</tr>
<tr>
<td>Q7</td>
<td>換気扇アイコンの表示</td>
</tr>
</tbody>
</table>
<h5 id="makefile-1">Makefile </h5>
<details open=""><summary> 12.webapp/Makefile </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>CC <span class="token operator">=</span> arm-linux-gnueabihf-gcc
TARGET <span class="token operator">=</span> devctl
<span class="token comment">#CFLAGS = -I/work/linux/nfsroot/usr/local/include</span>
CFLAGS_DEBUG <span class="token operator">=</span>  -gdwarf-2 <span class="token parameter variable">-O0</span>
<span class="token comment">#LDFLAGS = -L/work/linux/nfsroot/usr/local/lib</span>
<span class="token comment">#LIBS = -lts</span>

all: <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>

devctl: devctl.c
	<span class="token variable"><span class="token variable">$(</span>CC<span class="token variable">)</span></span> <span class="token parameter variable">-o</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.cgi $^ <span class="token variable"><span class="token variable">$(</span>CFLAGS<span class="token variable">)</span></span> <span class="token variable"><span class="token variable">$(</span>CFLAGS_DEBUG<span class="token variable">)</span></span>

index <span class="token builtin class-name">:</span> index.c
	<span class="token variable"><span class="token variable">$(</span>CC<span class="token variable">)</span></span> <span class="token parameter variable">-o</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.cgi $^ <span class="token variable"><span class="token variable">$(</span>CFLAGS<span class="token variable">)</span></span> <span class="token variable"><span class="token variable">$(</span>CFLAGS_DEBUG<span class="token variable">)</span></span>

myinstall <span class="token builtin class-name">:</span>
	<span class="token function">cp</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.cgi /work/linux/nfsroot/var/www/cgi-bin/
	<span class="token function">chmod</span> <span class="token number">755</span>           /work/linux/nfsroot/var/www/cgi-bin/<span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.cgi
	<span class="token function">cp</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.cgi /media/sf_ArmadilloX1/hwpwm/dbg/debug_share_hwpwm/R06_2024/04_practice
	<span class="token function">cp</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>.c   /media/sf_ArmadilloX1/hwpwm/dbg/debug_share_hwpwm/R06_2024/04_practice
	<span class="token function">cp</span> <span class="token parameter variable">-r</span> ./image       /work/linux/nfsroot/var/www/html/
	<span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">755</span>        /work/linux/nfsroot/var/www/html/image

clean:
	<span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable"><span class="token variable">$(</span>TARGET<span class="token variable">)</span></span>

.PHONY: clean
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="動作確認">動作確認 </h3>
<h5 id="make-clean">make clean </h5>
<details open=""><summary> $ make clean </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>atmark@atde8:/media/sf_ArmadilloX1/hwpwm/work/R06_2024/Application_debug/text/practice-example/12.webapp$ <span class="token function">make</span> clean
<span class="token function">rm</span> <span class="token parameter variable">-f</span> devctl
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></pre></details>
<h5 id="make-1">make </h5>
<details open=""><summary> $ make devctl </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>atmark@atde8:/media/sf_ArmadilloX1/hwpwm/work/R06_2024/Application_debug/text/practice-example/12.webapp$ <span class="token function">make</span> devctl
arm-linux-gnueabihf-gcc <span class="token parameter variable">-o</span> devctl.cgi devctl.c  -gdwarf-2 <span class="token parameter variable">-O0</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></pre></details>
<h5 id="sudo-make-myinstall-1">sudo make myinstall </h5>
<details open=""><summary> $ sudo make myinstall </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>atmark@atde8:/media/sf_ArmadilloX1/hwpwm/work/R06_2024/Application_debug/text/practice-example/12.webapp$ <span class="token function">sudo</span> <span class="token function">make</span> myinstall
<span class="token function">cp</span> <span class="token parameter variable">-p</span> devctl.cgi /work/linux/nfsroot/var/www/cgi-bin/
<span class="token function">chmod</span> <span class="token number">755</span> /work/linux/nfsroot/var/www/cgi-bin/devctl.cgi
<span class="token function">cp</span> <span class="token parameter variable">-p</span> devctl.cgi /media/sf_ArmadilloX1/hwpwm/dbg/debug_share_hwpwm/R06_2024/04_practice
<span class="token function">cp</span> <span class="token parameter variable">-p</span> devctl.c   /media/sf_ArmadilloX1/hwpwm/dbg/debug_share_hwpwm/R06_2024/04_practice
<span class="token function">cp</span> <span class="token parameter variable">-r</span> ./image       /work/linux/nfsroot/var/www/cgi-bin/
<span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">755</span>        /work/linux/nfsroot/var/www/html/image
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="devctlcgi-のパーミション確認">devctl.cgi のパーミション確認 </h4>
<details open=""><summary> root@armadillo:/var/www# ls -al cgi-bin/ </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:/var/www<span class="token comment"># ls -al cgi-bin/</span>
合計 <span class="token number">40</span>
drwxr-xr-x <span class="token number">2</span> root root  <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:04 <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">4</span> root root  <span class="token number">4096</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:04 <span class="token punctuation">..</span>
-rwxr-xr-x <span class="token number">1</span> root  <span class="token number">998</span> <span class="token number">16364</span>  <span class="token number">7</span>月 <span class="token number">15</span> <span class="token number">14</span>:52 devctl.cgi
-rwxr-xr-x <span class="token number">1</span> root  <span class="token number">998</span> <span class="token number">10856</span>  <span class="token number">7</span>月 <span class="token number">14</span> <span class="token number">18</span>:13 index.cgi
-rwxr-xr-x <span class="token number">1</span> root root   <span class="token number">240</span>  <span class="token number">7</span>月 <span class="token number">13</span> <span class="token number">18</span>:24 index.py
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="csideでロード">CSIDEでロード </h4>
<details open=""><summary> メニュー「ファイル」-「ロード」</summary>
<p><img src="assets/20240712/2024-07-12_20-00-56.png" alt="alt text"></p>
</details>
<h4 id="insmod既にinsmod-済みなら割愛">insmod（既にinsmod 済みなら割愛） </h4>
<details open=""><summary> # insmod leds.ko &amp; #insmod motor_hwpwm </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:/lib/modules/4.9.133-at27/extra<span class="token comment"># insmod leds.ko</span>
root@armadillo:/lib/modules/4.9.133-at27/extra<span class="token comment"># insmod motor_hwpwm.ko</span>
root@armadillo:/lib/modules/4.9.133-at27/extra<span class="token comment"># lsmod</span>
Module                  Size  Used by
motor_hwpwm             <span class="token number">4415</span>  <span class="token number">0</span>
leds                    <span class="token number">2103</span>  <span class="token number">0</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h4 id="span-stylecolor-redデバイスファイルのパーミション変更span"><span style="color: red">デバイスファイルのパーミション変更</span> </h4>
<details open=""><summary> root@armadillo:/sys/class/leds/led_ext# chmod 777 brightness </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:/sys/class/leds/led_ext<span class="token comment"># chmod 777 brightness</span>
root@armadillo:/sys/class/leds/led_ext<span class="token comment"># chmod 777 ../../motor/motor0/motor_rotation</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></pre></details>
<h3 id="実行結果">実行結果 </h3>
<h4 id="webブラウザによる動作確認">Webブラウザによる動作確認 </h4>
<details open=""><summary> devctl を Webブラウザから実行している様子 </summary>
<p><img src="assets/20240715/2024-07-15_13-59-58.png" alt="alt text"></p>
<p><img src="assets/20240715/2024-07-15_17-37-49.png" alt="alt text"></p>
<p><a href="https://youtu.be/JNXQb-oGVOM">https://youtu.be/JNXQb-oGVOM</a></p>
<p><video controls="" src="assets/20240715/20240715_Nginx_chrome_devctl.mp4" title="Title" width="1024"></video></p>
</details>
<h4 id="curl-による動作確認">curl による動作確認 </h4>
<details open=""><summary> root@armadillo:~# curl http://10.22.91.60/cgi-bin/devctl.cgi?lc=1 </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:~<span class="token comment"># curl http://10.22.91.60/cgi-bin/devctl.cgi?lc=1</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Device Control<span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>table<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td <span class="token assign-left variable">align</span><span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">&gt;</span>照明<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td <span class="token assign-left variable">align</span><span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">&gt;</span>照明<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td <span class="token assign-left variable">align</span><span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">&gt;</span>照明<span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td <span class="token assign-left variable">align</span><span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">&gt;</span>照明<span class="token operator"><span class="token file-descriptor important">4</span>&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td <span class="token assign-left variable">align</span><span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">&gt;</span>照明<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td <span class="token assign-left variable">align</span><span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">&gt;</span>照明<span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td <span class="token assign-left variable">align</span><span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">&gt;</span>照明<span class="token operator"><span class="token file-descriptor important">7</span>&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td <span class="token assign-left variable">align</span><span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">&gt;</span>照明<span class="token operator"><span class="token file-descriptor important">8</span>&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?lc=1&amp;mv=50"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/light_off.gif"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?lc=2&amp;mv=50"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/light_off.gif"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?lc=3&amp;mv=50"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/light_off.gif"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?lc=4&amp;mv=50"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/light_off.gif"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?lc=5&amp;mv=50"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/light_off.gif"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?lc=6&amp;mv=50"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/light_off.gif"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?lc=7&amp;mv=50"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/light_off.gif"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?lc=8&amp;mv=50"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/light_off.gif"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/table<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>table<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?mv=40"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/arrow_l.jpg"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>font <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token string">"7"</span><span class="token operator">&gt;</span> <span class="token number">50</span> <span class="token operator">&lt;</span>/font<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?mv=60"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/arrow_r.jpg"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"?mc=50"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>img <span class="token assign-left variable">src</span><span class="token operator">=</span><span class="token string">"/image/fan_off.jpg"</span> <span class="token assign-left variable">border</span><span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/td<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/tr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/table<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hr<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">"devctl.cgi"</span><span class="token operator">&gt;</span>更新<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
root@armadillo:~<span class="token comment">#</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre><p><a href="https://youtu.be/DFiZbdZ-sTE">https://youtu.be/DFiZbdZ-sTE</a></p>
<p><video controls="" src="assets/20240715/20240715_Nginx_curl_devctl.mp4" title="Title" width="1024"></video></p>
</details>
<h2 id="トラブル">トラブル </h2>
<h3 id="原因の切り分けは-nginx-側なのか-それとも-自作-cgi-側なのか-を見極める">原因の切り分けは Nginx 側なのか? それとも 自作 CGI 側なのか? を見極める </h3>
<ul>
<li>Nginx の index.nginx-debian.html は表示するか?</li>
<li>Nginx の <a href="http://index.py">index.py</a> は表示するか?</li>
<li>Nginx の index.cgi は表示するか?</li>
</ul>
<h4 id="nginx-側-ならば-varlognginxerrorlog-を調査">Nginx 側 ならば /var/log/nginx/error.log を調査 </h4>
<details open=""><summary> root@armadillo:/var/www/cgi-bin# cat  <span style="color: red">/var/log/nginx/error.log</span> </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>root@armadillo:/var/www/cgi-bin<span class="token comment"># cat /var/log/nginx/error.log</span>
<span class="token number">2024</span>/07/13 <span class="token number">18</span>:10:25 <span class="token punctuation">[</span>emerg<span class="token punctuation">]</span> <span class="token number">4190</span><span class="token comment">#4190: unexpected "}" in /etc/nginx/sites-enabled/default:92</span>
<span class="token number">2024</span>/07/13 <span class="token number">18</span>:10:37 <span class="token punctuation">[</span>emerg<span class="token punctuation">]</span> <span class="token number">4215</span><span class="token comment">#4215: unexpected "}" in /etc/nginx/sites-enabled/default:92</span>
<span class="token number">2024</span>/07/13 <span class="token number">18</span>:13:07 <span class="token punctuation">[</span>emerg<span class="token punctuation">]</span> <span class="token number">4280</span><span class="token comment">#4280: unexpected "}" in /etc/nginx/sites-enabled/default:92</span>
<span class="token number">2024</span>/07/13 <span class="token number">18</span>:17:56 <span class="token punctuation">[</span>emerg<span class="token punctuation">]</span> <span class="token number">4357</span><span class="token comment">#4357: unexpected "}" in /etc/nginx/sites-enabled/default:72</span>
<span class="token number">2024</span>/07/13 <span class="token number">18</span>:18:04 <span class="token punctuation">[</span>emerg<span class="token punctuation">]</span> <span class="token number">4392</span><span class="token comment">#4392: unexpected "}" in /etc/nginx/sites-enabled/default:72</span>
<span class="token number">2024</span>/07/14 <span class="token number">17</span>:36:21 <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token number">1516</span><span class="token comment">#1516: *1 FastCGI sent in stderr: "Cannot get script name, are DOCUMENT_ROOT and SCRIPT_NAME (or SCRIPT_FILENAME) set and is the script executable?" while reading response header from upstream, client: 10.22.91.30, server: _, request: "GET /cgi-bin/index.cgi HTTP/1.1", upstream: "fastcgi://unix:/var/run/fcgiwrap.socket:", host: "10.22.91.60"</span>
<span class="token number">2024</span>/07/14 <span class="token number">17</span>:36:40 <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token number">1516</span><span class="token comment">#1516: *1 FastCGI sent in stderr: "Cannot get script name, are DOCUMENT_ROOT and SCRIPT_NAME (or SCRIPT_FILENAME) set and is the script executable?" while reading response header from upstream, client: 10.22.91.30, server: _, request: "GET /cgi-bin/index.httml HTTP/1.1", upstream: "fastcgi://unix:/var/run/fcgiwrap.socket:", host: "10.22.91.60"</span>
<span class="token number">2024</span>/07/14 <span class="token number">17</span>:41:28 <span class="token punctuation">[</span>emerg<span class="token punctuation">]</span> <span class="token number">3141</span><span class="token comment">#3141: duplicate location "/cgi-bin/" in /etc/nginx/fcgiwrap.conf:3</span>
<span class="token number">2024</span>/07/14 <span class="token number">19</span>:08:58 <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token number">3360</span><span class="token comment">#3360: *9 FastCGI sent in stderr: "Cannot get script name, are DOCUMENT_ROOT and SCRIPT_NAME (or SCRIPT_FILENAME) set and is the script executable?" while reading response header from upstream, client: 10.22.91.30, server: myalmadillox1.chugoku-pc.ac.jp, request: "GET /cgi-bin/image/ HTTP/1.1", upstream: "fastcgi://unix:/var/run/fcgiwrap.socket:", host: "10.22.91.60"</span>
<span class="token number">2024</span>/07/14 <span class="token number">19</span>:09:28 <span class="token punctuation">[</span>error<span class="token punctuation">]</span> <span class="token number">3360</span><span class="token comment">#3360: *9 FastCGI sent in stderr: "Cannot get script name, are DOCUMENT_ROOT and SCRIPT_NAME (or SCRIPT_FILENAME) set and is the script executable?" while reading response header from upstream, client: 10.22.91.30, server: myalmadillox1.chugoku-pc.ac.jp, request: "GET /cgi-bin/image/arrow_1.jpg HTTP/1.1", upstream: "fastcgi://unix:/var/run/fcgiwrap.socket:", host: "10.22.91.60"</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h3 id="自作cgi側">自作CGI側 </h3>
<h4 id="no-such-file-or-directory">No such file or directory </h4>
<p><img src="assets/20240714/2024-07-14_19-13-18.png" alt="alt text"></p>
<ul>
<li>insmod しているか?</li>
</ul>
<h4 id="permission-denied">Permission denied </h4>
<p><img src="assets/20240712/2024-07-12_20-37-10.png" alt="alt text"></p>
<ul>
<li>デバイスファイルのパーミションは変更しているか?</li>
</ul>
<h4 id="curl-コマンド">curl コマンド </h4>
<details open=""><summary> $ curl http://10.22.91.60/cgi-bin/devctl.cgi </summary>
<pre data-role="codeBlock" data-info="bash{.line-numbers}" class="language-bash bash line-numbers"><code>atmark@atde8:/media/sf_ArmadilloX1/hwpwm/work/R06_2024/Application_debug/text/practice-example/12.webapp$ <span class="token function">curl</span> http://10.22.91.60/cgi-bin/devctl.cgi
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Device Control Error<span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
No such <span class="token function">file</span> or directory
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
</code><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></details>
<h2 id="その他">その他 </h2>
<h3 id="参考サイト">参考サイト </h3>
<ul>
<li><a href="https://nginx.org/en/">Nginx公式サイト（英語）</a></li>
<li><a href="https://mogile.web.fc2.com/nginx/index.html">Nginx翻訳サイト</a></li>
<li><a href="https://qiita.com/kotarella1110/items/33d6cfbe6cb897c2af4d">nginx 変数の値を確認したい時は add_header ディレイクティブを使うと超絶簡単</a></li>
<li><a href="https://www.server-world.info/query?os=Debian_10&amp;p=nginx&amp;f=5">Nginx : CGI 実行環境を設定する</a></li>
</ul>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>